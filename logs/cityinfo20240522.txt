2024-05-22 10:14:44.096 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:14:44.227 +01:00 [DBG] Hosting starting
2024-05-22 10:14:44.408 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:14:44.409 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:14:44.410 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:14:44.411 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:14:44.411 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:14:44.412 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:14:44.413 +01:00 [INF] Hosting environment: Development
2024-05-22 10:14:44.414 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:14:44.415 +01:00 [DBG] Hosting started
2024-05-22 10:15:22.343 +01:00 [DBG] Connection id "0HN3Q7UQL6IO8" received FIN.
2024-05-22 10:15:22.348 +01:00 [DBG] Connection id "0HN3Q7UQL6IO8" accepted.
2024-05-22 10:15:22.350 +01:00 [DBG] Connection id "0HN3Q7UQL6IO8" started.
2024-05-22 10:15:22.355 +01:00 [DBG] Connection id "0HN3Q7UQL6IO9" accepted.
2024-05-22 10:15:22.357 +01:00 [DBG] Connection id "0HN3Q7UQL6IO9" started.
2024-05-22 10:15:22.368 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:15:22.415 +01:00 [DBG] Connection id "0HN3Q7UQL6IO8" stopped.
2024-05-22 10:15:22.417 +01:00 [DBG] Connection id "0HN3Q7UQL6IO8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:15:22.419 +01:00 [DBG] Connection 0HN3Q7UQL6IO9 established using the following protocol: "Tls13"
2024-05-22 10:15:22.455 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 10:15:22.470 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:15:22.489 +01:00 [DBG] POST requests are not supported
2024-05-22 10:15:22.513 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 10:15:22.518 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 10:15:22.526 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:15:22.529 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:15:22.544 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 10:15:22.553 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:15:22.567 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:15:22.568 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:15:22.598 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:15:22.601 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:15:22.617 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:15:22.633 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:15:22.666 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:15:22.669 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 10:15:22.684 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 10:15:22.699 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 10:15:22.719 +01:00 [DBG] Connection id "0HN3Q7UQL6IO9", Request id "0HN3Q7UQL6IO9:00000001": started reading request body.
2024-05-22 10:15:22.723 +01:00 [DBG] Connection id "0HN3Q7UQL6IO9", Request id "0HN3Q7UQL6IO9:00000001": done reading request body.
2024-05-22 10:15:22.846 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:15:22.849 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:15:22.851 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:15:22.858 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:15:22.917 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:15:22.924 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:15:22.925 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:15:22.927 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:15:22.928 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 10:15:22.930 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 10:15:22.935 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 317.5893ms
2024-05-22 10:15:22.939 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:15:22.947 +01:00 [DBG] Connection id "0HN3Q7UQL6IO9" completed keep alive response.
2024-05-22 10:15:22.949 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 497.6807ms
2024-05-22 10:16:03.333 +01:00 [DBG] Connection id "0HN3Q7UQL6IOA" accepted.
2024-05-22 10:16:03.338 +01:00 [DBG] Connection id "0HN3Q7UQL6IOA" started.
2024-05-22 10:16:03.343 +01:00 [DBG] Connection 0HN3Q7UQL6IOA established using the following protocol: "Tls13"
2024-05-22 10:16:53.773 +01:00 [DBG] Connection id "0HN3Q7UQL6IOA" received FIN.
2024-05-22 10:16:53.788 +01:00 [DBG] The connection queue processing loop for 0HN3Q7UQL6IOA completed.
2024-05-22 10:16:53.788 +01:00 [DBG] Connection id "0HN3Q7UQL6IOA" is closed. The last processed stream ID was 0.
2024-05-22 10:16:53.791 +01:00 [DBG] Connection id "0HN3Q7UQL6IOA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:16:53.795 +01:00 [DBG] Connection id "0HN3Q7UQL6IOA" stopped.
2024-05-22 10:32:40.061 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:32:40.180 +01:00 [DBG] Hosting starting
2024-05-22 10:32:40.214 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:32:40.224 +01:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2024-05-22 10:32:40.226 +01:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2024-05-22 10:32:40.229 +01:00 [INF] Creating key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with creation date 2024-05-22 09:32:40Z, activation date 2024-05-22 09:32:40Z, and expiration date 2024-08-20 09:32:40Z.
2024-05-22 10:32:40.239 +01:00 [DBG] Descriptor deserializer type for key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2024-05-22 10:32:40.243 +01:00 [DBG] No key escrow sink found. Not writing key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} to escrow.
2024-05-22 10:32:40.249 +01:00 [DBG] Encrypting to Windows DPAPI for current user account (IV0563\nathan.yates_ivendi).
2024-05-22 10:32:40.260 +01:00 [INF] Writing data to file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:32:40.263 +01:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2024-05-22 10:32:40.265 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:32:40.269 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:32:40.273 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:32:40.276 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:32:40.279 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:32:40.291 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:32:40.295 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:32:40.298 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:32:40.303 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:32:40.305 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:32:40.475 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:32:40.476 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:32:40.477 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:32:40.478 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:32:40.479 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:32:40.481 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:32:40.482 +01:00 [INF] Hosting environment: Development
2024-05-22 10:32:40.483 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:32:40.484 +01:00 [DBG] Hosting started
2024-05-22 10:32:48.160 +01:00 [DBG] Connection id "0HN3Q88IASLUV" received FIN.
2024-05-22 10:32:48.166 +01:00 [DBG] Connection id "0HN3Q88IASLUV" accepted.
2024-05-22 10:32:48.168 +01:00 [DBG] Connection id "0HN3Q88IASLUV" started.
2024-05-22 10:32:48.169 +01:00 [DBG] Connection id "0HN3Q88IASLV0" accepted.
2024-05-22 10:32:48.170 +01:00 [DBG] Connection id "0HN3Q88IASLV0" started.
2024-05-22 10:32:48.207 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:32:48.249 +01:00 [DBG] Connection 0HN3Q88IASLV0 established using the following protocol: "Tls13"
2024-05-22 10:32:48.250 +01:00 [DBG] Connection id "0HN3Q88IASLUV" stopped.
2024-05-22 10:32:48.263 +01:00 [DBG] Connection id "0HN3Q88IASLUV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:32:48.294 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-22 10:32:48.309 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:32:48.325 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:32:48.345 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-22 10:32:48.349 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-22 10:32:48.363 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-22 10:32:48.420 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 10:32:48.424 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-22 10:32:48.427 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-22 10:32:48.431 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-22 10:32:48.443 +01:00 [DBG] Connection id "0HN3Q88IASLV0" completed keep alive response.
2024-05-22 10:32:48.445 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 156.5391ms
2024-05-22 10:33:03.210 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 10:33:03.213 +01:00 [DBG] POST requests are not supported
2024-05-22 10:33:03.215 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 10:33:03.216 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 10:33:03.218 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:33:03.221 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 10:33:03.226 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:33:03.242 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 10:33:03.261 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:33:03.262 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:33:03.276 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:33:03.292 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:33:03.308 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:33:03.311 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:33:03.312 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:33:03.323 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:33:03.329 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 10:33:03.337 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 10:33:03.360 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 10:33:03.381 +01:00 [DBG] Connection id "0HN3Q88IASLV0", Request id "0HN3Q88IASLV0:00000002": started reading request body.
2024-05-22 10:33:03.385 +01:00 [DBG] Connection id "0HN3Q88IASLV0", Request id "0HN3Q88IASLV0:00000002": done reading request body.
2024-05-22 10:33:03.465 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:33:03.469 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:33:03.470 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:33:03.476 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:33:03.509 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:33:03.517 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:33:03.521 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:33:03.522 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:33:03.524 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 10:33:03.526 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 10:33:03.530 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 218.4616ms
2024-05-22 10:33:03.538 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:33:03.539 +01:00 [DBG] Connection id "0HN3Q88IASLV0" completed keep alive response.
2024-05-22 10:33:03.547 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 337.5057ms
2024-05-22 10:33:33.279 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-22 10:33:33.284 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:33:33.284 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-22 10:33:33.286 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-22 10:33:33.287 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-22 10:33:33.323 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:33:33.326 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:33:33.334 +01:00 [DBG] Authorization was successful.
2024-05-22 10:33:33.336 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-22 10:33:33.342 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-22 10:33:33.362 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:33:33.377 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:33:33.378 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:33:33.407 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:33:33.409 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:33:33.424 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-22 10:33:33.571 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:33:33.587 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-22 10:33:33.589 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-22 10:33:33.591 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-05-22 10:33:33.594 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-05-22 10:33:33.608 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-22 10:33:33.609 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-22 10:33:33.624 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-22 10:33:33.626 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-22 10:33:33.641 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-22 10:33:33.642 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-22 10:33:33.657 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-22 10:33:33.673 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-22 10:33:33.674 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-22 10:33:33.689 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-22 10:33:33.690 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-22 10:33:33.705 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-22 10:33:33.706 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-22 10:33:33.720 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-22 10:33:33.722 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-22 10:33:33.723 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-22 10:33:33.724 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-22 10:33:33.725 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-22 10:33:33.731 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-22 10:33:33.743 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-22 10:33:33.744 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-22 10:33:33.779 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-22 10:33:33.795 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-22 10:33:33.811 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-22 10:33:33.831 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-22 10:33:34.404 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:33:34.425 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-05-22 10:33:34.566 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:33:34.592 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:33:34.604 +01:00 [DBG] Created DbConnection. (10ms).
2024-05-22 10:33:34.609 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:33:34.634 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:33:34.647 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:33:34.655 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-05-22 10:33:34.658 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-05-22 10:33:34.667 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-22 10:33:34.703 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-22 10:33:34.714 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:33:34.728 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 16ms reading results.
2024-05-22 10:33:34.746 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:33:34.762 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:33:34.770 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-05-22 10:33:34.834 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:33:34.843 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:33:34.845 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:33:34.854 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:33:34.856 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:33:34.859 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-05-22 10:33:34.861 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-22 10:33:34.883 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-22 10:33:34.909 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:33:34.935 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:33:34.937 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:33:34.942 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:33:34.958 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 63ms reading results.
2024-05-22 10:33:34.977 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:33:34.993 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:33:35.021 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:33:35.025 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:33:35.026 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:33:35.027 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:33:35.029 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:33:35.033 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:33:35.071 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1647.5236ms
2024-05-22 10:33:35.074 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-22 10:33:35.075 +01:00 [DBG] Connection id "0HN3Q88IASLV0" completed keep alive response.
2024-05-22 10:33:35.077 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:33:35.082 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:33:35.088 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (5ms).
2024-05-22 10:33:35.090 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 200 205 application/json; charset=utf-8 1812.4592ms
2024-05-22 10:39:35.643 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:39:35.785 +01:00 [DBG] Hosting starting
2024-05-22 10:39:35.819 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:39:35.826 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:39:35.836 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:39:35.845 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:39:35.851 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:39:35.854 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:39:35.857 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:39:35.864 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:39:35.872 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:39:35.875 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:39:35.885 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:39:36.053 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:39:36.055 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:39:36.056 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:39:36.057 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:39:36.058 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:39:36.059 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:39:36.060 +01:00 [INF] Hosting environment: Development
2024-05-22 10:39:36.061 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:39:36.062 +01:00 [DBG] Hosting started
2024-05-22 10:39:44.594 +01:00 [DBG] Connection id "0HN3Q8CEEA9DQ" received FIN.
2024-05-22 10:39:44.601 +01:00 [DBG] Connection id "0HN3Q8CEEA9DQ" accepted.
2024-05-22 10:39:44.604 +01:00 [DBG] Connection id "0HN3Q8CEEA9DQ" started.
2024-05-22 10:39:44.606 +01:00 [DBG] Connection id "0HN3Q8CEEA9DR" accepted.
2024-05-22 10:39:44.607 +01:00 [DBG] Connection id "0HN3Q8CEEA9DR" started.
2024-05-22 10:39:44.626 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:39:44.674 +01:00 [DBG] Connection id "0HN3Q8CEEA9DQ" stopped.
2024-05-22 10:39:44.676 +01:00 [DBG] Connection 0HN3Q8CEEA9DR established using the following protocol: "Tls13"
2024-05-22 10:39:44.678 +01:00 [DBG] Connection id "0HN3Q8CEEA9DQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:39:44.710 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 10:39:44.726 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:39:44.741 +01:00 [DBG] POST requests are not supported
2024-05-22 10:39:44.762 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 10:39:44.768 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 10:39:44.777 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:39:44.839 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 10:39:44.844 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:39:44.861 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 10:39:44.881 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:39:44.897 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:39:44.912 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:39:44.928 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:39:44.944 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:39:44.960 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:39:44.974 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:39:45.003 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:39:45.007 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 10:39:45.021 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 10:39:45.044 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 10:39:45.074 +01:00 [DBG] Connection id "0HN3Q8CEEA9DR", Request id "0HN3Q8CEEA9DR:00000001": started reading request body.
2024-05-22 10:39:45.078 +01:00 [DBG] Connection id "0HN3Q8CEEA9DR", Request id "0HN3Q8CEEA9DR:00000001": done reading request body.
2024-05-22 10:39:45.156 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:39:45.158 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:39:45.160 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:39:45.168 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:39:45.201 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:39:45.207 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:39:45.207 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:39:45.208 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:39:45.210 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 10:39:45.211 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 10:39:45.220 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 259.2395ms
2024-05-22 10:39:45.224 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:39:45.234 +01:00 [DBG] Connection id "0HN3Q8CEEA9DR" completed keep alive response.
2024-05-22 10:39:45.239 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 532.0783ms
2024-05-22 10:40:06.669 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:40:06.676 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:40:06.678 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:40:06.681 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:40:06.687 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:40:06.750 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:40:06.752 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:40:06.756 +01:00 [DBG] Authorization was successful.
2024-05-22 10:40:06.757 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:40:06.765 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:40:06.776 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:40:06.781 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:40:06.795 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:40:06.828 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:40:06.845 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:40:06.861 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:40:06.974 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:40:06.989 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:40:06.991 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:40:06.993 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:40:06.994 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:40:06.999 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:40:07.009 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:40:07.012 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:40:07.557 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:40:07.581 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 10:40:07.711 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:40:07.745 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:40:07.756 +01:00 [DBG] Created DbConnection. (9ms).
2024-05-22 10:40:07.760 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:40:07.774 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:40:07.782 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:40:07.799 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:40:07.804 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2024-05-22 10:40:07.817 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:40:07.854 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:40:07.864 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:40:07.871 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 8ms reading results.
2024-05-22 10:40:07.877 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:40:07.891 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (14ms).
2024-05-22 10:41:46.397 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 10:41:46.463 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:41:46.476 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:41:46.484 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:41:46.487 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:41:46.488 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:41:46.489 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:41:46.491 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:41:46.499 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:41:46.516 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:41:46.531 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:41:46.538 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 36ms reading results.
2024-05-22 10:41:46.565 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:41:46.575 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (9ms).
2024-05-22 10:41:46.586 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:41:46.599 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:41:46.603 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:41:46.611 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:41:46.613 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:41:46.618 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:41:46.656 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 99794.7531ms
2024-05-22 10:41:46.659 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:41:46.661 +01:00 [DBG] Connection id "0HN3Q8CEEA9DR" completed keep alive response.
2024-05-22 10:41:46.664 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:41:46.667 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:41:46.669 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:41:46.671 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 200 110 application/json; charset=utf-8 100002.355ms
2024-05-22 10:42:46.076 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:42:46.217 +01:00 [DBG] Hosting starting
2024-05-22 10:42:46.249 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:42:46.259 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:42:46.271 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:42:46.279 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:42:46.282 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:42:46.284 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:42:46.287 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:42:46.294 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:42:46.296 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:42:46.298 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:42:46.300 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:42:46.481 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:42:46.482 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:42:46.484 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:42:46.486 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:42:46.488 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:42:46.489 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:42:46.490 +01:00 [INF] Hosting environment: Development
2024-05-22 10:42:46.491 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:42:46.493 +01:00 [DBG] Hosting started
2024-05-22 10:42:47.465 +01:00 [DBG] Connection id "0HN3Q8E4UA15G" received FIN.
2024-05-22 10:42:47.471 +01:00 [DBG] Connection id "0HN3Q8E4UA15G" accepted.
2024-05-22 10:42:47.474 +01:00 [DBG] Connection id "0HN3Q8E4UA15G" started.
2024-05-22 10:42:47.475 +01:00 [DBG] Connection id "0HN3Q8E4UA15H" accepted.
2024-05-22 10:42:47.476 +01:00 [DBG] Connection id "0HN3Q8E4UA15H" started.
2024-05-22 10:42:47.490 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:42:47.537 +01:00 [DBG] Connection 0HN3Q8E4UA15H established using the following protocol: "Tls13"
2024-05-22 10:42:47.539 +01:00 [DBG] Connection id "0HN3Q8E4UA15G" stopped.
2024-05-22 10:42:47.544 +01:00 [DBG] Connection id "0HN3Q8E4UA15G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:42:47.577 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:42:47.592 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:42:47.607 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:42:47.631 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:42:47.637 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:42:47.640 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:42:47.757 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:42:47.759 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:42:47.764 +01:00 [DBG] Authorization was successful.
2024-05-22 10:42:47.766 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:42:47.787 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:42:47.798 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:42:47.801 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:42:47.803 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:42:47.808 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:42:47.819 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:42:47.825 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:42:47.946 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:42:47.962 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:42:47.979 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:42:47.985 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:42:48.001 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:42:48.013 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:42:48.014 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:42:48.031 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:44:14.975 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:44:15.110 +01:00 [DBG] Hosting starting
2024-05-22 10:44:15.138 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:44:15.144 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:44:15.152 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:44:15.159 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:44:15.162 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:44:15.165 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:44:15.169 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:44:15.173 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:44:15.175 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:44:15.177 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:44:15.178 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:44:15.352 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:44:15.354 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:44:15.355 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:44:15.356 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:44:15.357 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:44:15.359 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:44:15.359 +01:00 [INF] Hosting environment: Development
2024-05-22 10:44:15.360 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:44:15.361 +01:00 [DBG] Hosting started
2024-05-22 10:44:16.152 +01:00 [DBG] Connection id "0HN3Q8EVC34CI" received FIN.
2024-05-22 10:44:16.157 +01:00 [DBG] Connection id "0HN3Q8EVC34CI" accepted.
2024-05-22 10:44:16.158 +01:00 [DBG] Connection id "0HN3Q8EVC34CI" started.
2024-05-22 10:44:16.160 +01:00 [DBG] Connection id "0HN3Q8EVC34CJ" accepted.
2024-05-22 10:44:16.162 +01:00 [DBG] Connection id "0HN3Q8EVC34CJ" started.
2024-05-22 10:44:16.174 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:44:16.215 +01:00 [DBG] Connection 0HN3Q8EVC34CJ established using the following protocol: "Tls13"
2024-05-22 10:44:16.217 +01:00 [DBG] Connection id "0HN3Q8EVC34CI" stopped.
2024-05-22 10:44:16.220 +01:00 [DBG] Connection id "0HN3Q8EVC34CI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:44:16.256 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:44:16.271 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:44:16.289 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:44:16.310 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:44:16.314 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:44:16.328 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:44:16.476 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:44:16.479 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:44:16.485 +01:00 [DBG] Authorization was successful.
2024-05-22 10:44:16.487 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:44:16.511 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:44:16.519 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:44:16.521 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:44:16.522 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:44:16.525 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:44:16.526 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:44:16.539 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:44:16.644 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:44:16.659 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:44:16.673 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:44:16.676 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:44:16.678 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:44:16.690 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:44:16.692 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:44:16.708 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:51:59.038 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:51:59.162 +01:00 [DBG] Hosting starting
2024-05-22 10:51:59.190 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:51:59.197 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:51:59.205 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:51:59.212 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:51:59.215 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:51:59.217 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:51:59.219 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:51:59.224 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:51:59.232 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:51:59.234 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:51:59.256 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:51:59.424 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:51:59.426 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:51:59.428 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:51:59.428 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:51:59.429 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:51:59.431 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:51:59.431 +01:00 [INF] Hosting environment: Development
2024-05-22 10:51:59.433 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:51:59.434 +01:00 [DBG] Hosting started
2024-05-22 10:52:03.882 +01:00 [DBG] Connection id "0HN3Q8JAON3V6" received FIN.
2024-05-22 10:52:03.888 +01:00 [DBG] Connection id "0HN3Q8JAON3V6" accepted.
2024-05-22 10:52:03.890 +01:00 [DBG] Connection id "0HN3Q8JAON3V6" started.
2024-05-22 10:52:03.891 +01:00 [DBG] Connection id "0HN3Q8JAON3V7" accepted.
2024-05-22 10:52:03.893 +01:00 [DBG] Connection id "0HN3Q8JAON3V7" started.
2024-05-22 10:52:03.906 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:52:03.947 +01:00 [DBG] Connection 0HN3Q8JAON3V7 established using the following protocol: "Tls13"
2024-05-22 10:52:03.950 +01:00 [DBG] Connection id "0HN3Q8JAON3V6" stopped.
2024-05-22 10:52:03.956 +01:00 [DBG] Connection id "0HN3Q8JAON3V6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:52:03.985 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:52:04.000 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:52:04.015 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:52:04.034 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:52:04.038 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:52:04.053 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:04.185 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:52:04.188 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:52:04.194 +01:00 [DBG] Authorization was successful.
2024-05-22 10:52:04.196 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:04.215 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:52:04.222 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:52:04.223 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:52:04.225 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:52:04.229 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:52:04.230 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:52:04.237 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:52:04.344 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:52:04.360 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:52:04.384 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:52:04.390 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:52:04.394 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:04.405 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:04.407 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:52:04.423 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:04.946 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:52:04.970 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 10:52:05.124 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:52:05.157 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:52:05.167 +01:00 [DBG] Created DbConnection. (8ms).
2024-05-22 10:52:05.171 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:52:05.183 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:05.190 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:52:05.197 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-05-22 10:52:05.209 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2024-05-22 10:52:05.217 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:52:05.253 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:52:05.275 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:05.292 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 17ms reading results.
2024-05-22 10:52:05.305 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:05.320 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:52:05.336 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:52:05.338 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:52:05.353 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1114.6532ms
2024-05-22 10:52:05.361 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:05.367 +01:00 [DBG] Connection id "0HN3Q8JAON3V7" completed keep alive response.
2024-05-22 10:52:05.370 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:52:05.381 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:52:05.384 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:52:05.386 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 1405.9231ms
2024-05-22 10:52:25.935 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:52:25.939 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:52:25.940 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:52:25.941 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:52:25.943 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:25.947 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:52:25.948 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:52:25.951 +01:00 [DBG] Authorization was successful.
2024-05-22 10:52:25.951 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:25.953 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:52:25.955 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:52:25.957 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:52:25.958 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:52:25.969 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:52:25.971 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:52:25.972 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:52:25.975 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:52:25.991 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:52:25.995 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:52:25.997 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:26.011 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:26.013 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:52:26.027 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:26.039 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:52:26.047 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:52:26.059 +01:00 [DBG] Created DbConnection. (12ms).
2024-05-22 10:52:26.060 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:52:26.075 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:26.090 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:52:26.092 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:52:26.107 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-22 10:52:26.108 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:52:26.138 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:52:26.154 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:26.165 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 10ms reading results.
2024-05-22 10:52:26.169 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:26.178 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (8ms).
2024-05-22 10:52:26.181 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:52:26.185 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:52:26.188 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 215.8034ms
2024-05-22 10:52:26.202 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:26.204 +01:00 [DBG] Connection id "0HN3Q8JAON3V7" completed keep alive response.
2024-05-22 10:52:26.213 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:52:26.219 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:52:26.221 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:52:26.235 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 300.9438ms
2024-05-22 10:52:50.457 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:52:50.587 +01:00 [DBG] Hosting starting
2024-05-22 10:52:50.619 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:52:50.627 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:52:50.635 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:52:50.645 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:52:50.650 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:52:50.654 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:52:50.657 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:52:50.663 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:52:50.667 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:52:50.669 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:52:50.683 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:52:50.854 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:52:50.856 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:52:50.857 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:52:50.858 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:52:50.859 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:52:50.860 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:52:50.861 +01:00 [INF] Hosting environment: Development
2024-05-22 10:52:50.863 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:52:50.864 +01:00 [DBG] Hosting started
2024-05-22 10:52:51.562 +01:00 [DBG] Connection id "0HN3Q8JOVDSPT" received FIN.
2024-05-22 10:52:51.568 +01:00 [DBG] Connection id "0HN3Q8JOVDSPT" accepted.
2024-05-22 10:52:51.573 +01:00 [DBG] Connection id "0HN3Q8JOVDSPT" started.
2024-05-22 10:52:51.574 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU" accepted.
2024-05-22 10:52:51.576 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU" started.
2024-05-22 10:52:51.592 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:52:51.648 +01:00 [DBG] Connection 0HN3Q8JOVDSPU established using the following protocol: "Tls13"
2024-05-22 10:52:51.649 +01:00 [DBG] Connection id "0HN3Q8JOVDSPT" stopped.
2024-05-22 10:52:51.653 +01:00 [DBG] Connection id "0HN3Q8JOVDSPT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:52:51.684 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:52:51.699 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:52:51.713 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:52:51.733 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:52:51.738 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:52:51.754 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:51.893 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:52:51.895 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:52:51.900 +01:00 [DBG] Authorization was successful.
2024-05-22 10:52:51.903 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:51.925 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:52:51.948 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:52:51.951 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:52:51.975 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:52:51.991 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:52:51.995 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:52:52.011 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:52:52.125 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:52:52.140 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:52:52.154 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:52:52.158 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:52:52.168 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:52.171 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:52.185 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:52:52.203 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:52:52.739 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:52:52.766 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 10:52:52.905 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:52:52.940 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:52:52.952 +01:00 [DBG] Created DbConnection. (10ms).
2024-05-22 10:52:52.957 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:52:52.978 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:52.989 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:52:53.006 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:52:53.015 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (27ms).
2024-05-22 10:52:53.024 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:52:53.052 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:52:53.075 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:53.084 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2024-05-22 10:52:53.101 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:52:53.116 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:52:53.122 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:52:53.135 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:52:53.139 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1127.4505ms
2024-05-22 10:52:53.152 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:52:53.170 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU" completed keep alive response.
2024-05-22 10:52:53.185 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:52:53.191 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:52:53.201 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (10ms).
2024-05-22 10:52:53.204 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 1524.5013ms
2024-05-22 10:53:36.705 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:53:36.710 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:53:36.717 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:53:36.717 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:53:36.719 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:53:36.723 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:53:36.728 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:53:36.743 +01:00 [DBG] Authorization was successful.
2024-05-22 10:53:36.744 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:53:36.758 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:53:36.790 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:53:36.805 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:53:36.806 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:53:36.834 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:53:36.838 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:53:36.853 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:53:36.869 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:53:36.878 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:53:36.883 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:53:36.884 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:53:36.896 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:53:36.907 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:53:36.911 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:53:36.936 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:53:36.944 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:53:36.954 +01:00 [DBG] Created DbConnection. (10ms).
2024-05-22 10:53:36.958 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:53:36.960 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:53:36.974 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:53:36.990 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:53:36.991 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-22 10:53:37.006 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:53:37.034 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:53:37.052 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:53:37.066 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 13ms reading results.
2024-05-22 10:53:37.075 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:53:37.078 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:53:37.084 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:53:37.085 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:53:37.094 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 240.7397ms
2024-05-22 10:53:37.098 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:53:37.108 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU" completed keep alive response.
2024-05-22 10:53:37.109 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:53:37.116 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:53:37.118 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:53:37.130 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 424.9971ms
2024-05-22 10:53:46.328 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 10:53:46.332 +01:00 [DBG] POST requests are not supported
2024-05-22 10:53:46.333 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 10:53:46.334 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 10:53:46.336 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:53:46.337 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 10:53:46.338 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:53:46.341 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 10:53:46.345 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:53:46.346 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:53:46.348 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:53:46.350 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:53:46.352 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:53:46.362 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:53:46.366 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:53:46.367 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:53:46.372 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 10:53:46.389 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 10:53:46.404 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 10:53:46.435 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU", Request id "0HN3Q8JOVDSPU:00000003": started reading request body.
2024-05-22 10:53:46.440 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU", Request id "0HN3Q8JOVDSPU:00000003": done reading request body.
2024-05-22 10:53:46.504 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:53:46.506 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:53:46.509 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:53:46.517 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:53:46.529 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:53:46.556 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:53:46.557 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:53:46.572 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:53:46.589 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 10:53:46.603 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 10:53:46.606 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 244.4882ms
2024-05-22 10:53:46.620 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:53:46.636 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU" completed keep alive response.
2024-05-22 10:53:46.638 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 309.1821ms
2024-05-22 10:54:01.355 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:54:01.357 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:54:01.358 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:54:01.359 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:54:01.363 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:54:01.364 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:54:01.365 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:54:01.366 +01:00 [DBG] Authorization was successful.
2024-05-22 10:54:01.367 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:54:01.368 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:54:01.376 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:54:01.383 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:54:01.384 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:54:01.388 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:54:01.389 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:54:01.405 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:54:01.422 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:54:01.437 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:54:01.452 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:54:01.454 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:54:01.469 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:54:01.470 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:54:01.485 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:54:01.537 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:54:01.541 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:54:01.548 +01:00 [DBG] Created DbConnection. (6ms).
2024-05-22 10:54:01.549 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:01.551 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.553 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:54:01.555 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:54:01.556 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:54:01.565 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:54:01.573 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:54:01.588 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.604 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 15ms reading results.
2024-05-22 10:54:01.608 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.623 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:54:01.641 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 10:54:01.661 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:54:01.689 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:01.690 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.693 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:54:01.695 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:54:01.697 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-22 10:54:01.698 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:54:01.701 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:54:01.704 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.705 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-22 10:54:01.707 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.709 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:54:01.722 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 10:54:01.756 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:54:01.767 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:01.769 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.770 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:54:01.780 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-05-22 10:54:01.782 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-05-22 10:54:01.783 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:54:01.786 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:54:01.801 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:54:01.820 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:54:01.823 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.837 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 48ms reading results.
2024-05-22 10:54:01.852 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:01.865 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (13ms).
2024-05-22 10:54:01.879 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:54:01.895 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:54:01.900 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:54:01.909 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:54:01.911 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:54:01.917 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:54:01.969 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 563.9716ms
2024-05-22 10:54:01.971 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:54:01.972 +01:00 [DBG] Connection id "0HN3Q8JOVDSPU" completed keep alive response.
2024-05-22 10:54:01.974 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:54:01.976 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:01.979 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:54:01.981 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 626.4664ms
2024-05-22 10:54:19.959 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:54:20.109 +01:00 [DBG] Hosting starting
2024-05-22 10:54:20.141 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:54:20.150 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:54:20.161 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:54:20.169 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:54:20.173 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:54:20.175 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:54:20.177 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:54:20.182 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:54:20.184 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:54:20.186 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:54:20.193 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:54:20.379 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:54:20.380 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:54:20.381 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:54:20.382 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:54:20.383 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:54:20.384 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:54:20.385 +01:00 [INF] Hosting environment: Development
2024-05-22 10:54:20.386 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:54:20.387 +01:00 [DBG] Hosting started
2024-05-22 10:54:26.463 +01:00 [DBG] Connection id "0HN3Q8KL8FADC" received FIN.
2024-05-22 10:54:26.468 +01:00 [DBG] Connection id "0HN3Q8KL8FADC" accepted.
2024-05-22 10:54:26.470 +01:00 [DBG] Connection id "0HN3Q8KL8FADC" started.
2024-05-22 10:54:26.471 +01:00 [DBG] Connection id "0HN3Q8KL8FADD" accepted.
2024-05-22 10:54:26.473 +01:00 [DBG] Connection id "0HN3Q8KL8FADD" started.
2024-05-22 10:54:26.511 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:54:26.551 +01:00 [DBG] Connection 0HN3Q8KL8FADD established using the following protocol: "Tls13"
2024-05-22 10:54:26.562 +01:00 [DBG] Connection id "0HN3Q8KL8FADC" stopped.
2024-05-22 10:54:26.565 +01:00 [DBG] Connection id "0HN3Q8KL8FADC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:54:26.590 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:54:26.606 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:54:26.620 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:54:26.640 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:54:26.648 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:54:26.657 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:54:26.779 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:54:26.782 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:54:26.786 +01:00 [DBG] Authorization was successful.
2024-05-22 10:54:26.789 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:54:26.809 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:54:26.837 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:54:26.838 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:54:26.852 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:54:26.869 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:54:26.884 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:54:26.900 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:54:27.021 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:54:27.036 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:54:27.048 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:54:27.056 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:54:27.058 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:54:27.070 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:54:27.072 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:54:27.088 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:54:27.618 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:54:27.647 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 10:54:27.785 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:54:27.815 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:54:27.825 +01:00 [DBG] Created DbConnection. (8ms).
2024-05-22 10:54:27.829 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:27.839 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:27.853 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:54:27.860 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-05-22 10:54:27.864 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-05-22 10:54:27.878 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:54:27.915 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:54:27.924 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:27.931 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 8ms reading results.
2024-05-22 10:54:27.939 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:27.953 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (14ms).
2024-05-22 10:54:27.968 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 10:54:27.985 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:54:28.001 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:28.004 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:28.005 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:54:28.006 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:54:28.009 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-22 10:54:28.010 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:54:28.025 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:54:28.042 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:28.049 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-22 10:54:28.064 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:28.086 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (22ms).
2024-05-22 10:54:28.094 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 10:54:28.129 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:54:28.135 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:28.136 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:28.138 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:54:28.139 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:54:28.141 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:54:28.143 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:54:28.146 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:54:28.163 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:54:28.179 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:54:28.184 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:28.196 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 47ms reading results.
2024-05-22 10:54:28.208 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:54:28.210 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:54:28.222 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:54:28.251 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:54:28.252 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:54:28.263 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:54:28.275 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:54:28.282 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:54:28.391 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1489.3348ms
2024-05-22 10:54:28.394 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:54:28.396 +01:00 [DBG] Connection id "0HN3Q8KL8FADD" completed keep alive response.
2024-05-22 10:54:28.399 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:54:28.402 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:54:28.405 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 10:54:28.410 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 1822.0776ms
2024-05-22 10:55:14.679 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:55:14.794 +01:00 [DBG] Hosting starting
2024-05-22 10:55:14.827 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:55:14.834 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:55:14.843 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:55:14.851 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:55:14.855 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:55:14.857 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:55:14.859 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:55:14.863 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:55:14.871 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:55:14.881 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:55:14.882 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:55:15.057 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:55:15.059 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:55:15.060 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:55:15.061 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:55:15.062 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:55:15.063 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:55:15.063 +01:00 [INF] Hosting environment: Development
2024-05-22 10:55:15.064 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:55:15.065 +01:00 [DBG] Hosting started
2024-05-22 10:55:16.507 +01:00 [DBG] Connection id "0HN3Q8L45NFSG" received FIN.
2024-05-22 10:55:16.512 +01:00 [DBG] Connection id "0HN3Q8L45NFSG" accepted.
2024-05-22 10:55:16.513 +01:00 [DBG] Connection id "0HN3Q8L45NFSG" started.
2024-05-22 10:55:16.515 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" accepted.
2024-05-22 10:55:16.516 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" started.
2024-05-22 10:55:16.529 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:55:16.571 +01:00 [DBG] Connection id "0HN3Q8L45NFSG" stopped.
2024-05-22 10:55:16.572 +01:00 [DBG] Connection 0HN3Q8L45NFSH established using the following protocol: "Tls13"
2024-05-22 10:55:16.574 +01:00 [DBG] Connection id "0HN3Q8L45NFSG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:55:16.606 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:55:16.620 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:55:16.637 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:55:16.667 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:55:16.672 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:55:16.685 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:16.816 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:55:16.820 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:55:16.825 +01:00 [DBG] Authorization was successful.
2024-05-22 10:55:16.827 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:16.847 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:55:16.866 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:55:16.878 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:55:16.879 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:55:16.881 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:55:16.883 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:55:16.898 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:17.018 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:55:17.033 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:17.047 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:17.049 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:55:17.052 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:17.064 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:17.066 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:17.081 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:17.583 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:55:17.609 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 10:55:17.747 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:55:17.778 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:55:17.789 +01:00 [DBG] Created DbConnection. (8ms).
2024-05-22 10:55:17.794 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:17.807 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:17.818 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:17.824 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-05-22 10:55:17.832 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2024-05-22 10:55:17.840 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:17.880 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:17.891 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:17.900 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 12ms reading results.
2024-05-22 10:55:17.914 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:17.930 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:55:17.943 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 10:55:17.960 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:55:17.983 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:17.989 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:18.015 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:18.030 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:55:18.033 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2024-05-22 10:55:18.035 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:55:18.065 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:55:18.095 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:18.120 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 24ms reading results.
2024-05-22 10:55:18.128 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:18.139 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2024-05-22 10:55:18.146 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 10:55:18.182 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:55:18.192 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:18.193 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:18.195 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:18.197 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:55:18.198 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:55:18.199 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:55:18.202 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:55:18.229 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:55:18.243 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:55:18.245 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:18.246 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 30ms reading results.
2024-05-22 10:55:18.248 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:18.260 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (11ms).
2024-05-22 10:55:18.273 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:55:18.298 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:55:18.300 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:55:18.312 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:55:18.316 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:55:18.328 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:55:18.421 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1520.6919ms
2024-05-22 10:55:18.425 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:18.426 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" completed keep alive response.
2024-05-22 10:55:18.429 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:55:18.432 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:18.434 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:55:18.442 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 1840.7263ms
2024-05-22 10:55:20.382 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:55:20.387 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:55:20.391 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:55:20.392 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:55:20.394 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:20.396 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:55:20.397 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:55:20.399 +01:00 [DBG] Authorization was successful.
2024-05-22 10:55:20.405 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:20.415 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:55:20.435 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:55:20.449 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:55:20.451 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:55:20.479 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:55:20.483 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:55:20.498 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:20.513 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:20.527 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:20.529 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:55:20.539 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:20.542 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:20.543 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:20.553 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:20.565 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:55:20.571 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:55:20.583 +01:00 [DBG] Created DbConnection. (11ms).
2024-05-22 10:55:20.584 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:20.597 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.599 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:20.603 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-05-22 10:55:20.618 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2024-05-22 10:55:20.620 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:20.649 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:20.682 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.698 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 16ms reading results.
2024-05-22 10:55:20.715 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.731 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:55:20.747 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:20.748 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.763 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:20.779 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:55:20.780 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-05-22 10:55:20.795 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:55:20.825 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:55:20.848 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.865 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 16ms reading results.
2024-05-22 10:55:20.884 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.899 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:55:20.902 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:20.916 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:20.930 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:20.933 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:55:20.946 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:55:20.947 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:55:20.978 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:55:20.991 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:55:20.995 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:55:20.996 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:21.006 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 15ms reading results.
2024-05-22 10:55:21.011 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:21.024 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (12ms).
2024-05-22 10:55:21.026 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:55:21.041 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:55:21.042 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:55:21.050 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:55:21.051 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:55:21.060 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:55:21.076 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 578.5726ms
2024-05-22 10:55:21.098 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:21.101 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" completed keep alive response.
2024-05-22 10:55:21.117 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:55:21.119 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:21.133 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (13ms).
2024-05-22 10:55:21.134 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 752.4097ms
2024-05-22 10:55:25.981 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:55:25.984 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:55:25.986 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:55:25.988 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:55:25.992 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:25.995 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:55:26.000 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:55:26.003 +01:00 [DBG] Authorization was successful.
2024-05-22 10:55:26.016 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:26.031 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:55:26.062 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:55:26.064 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:55:26.078 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:55:26.094 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:55:26.111 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:55:26.126 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:26.141 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:26.149 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:26.155 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:55:26.167 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:26.169 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:26.183 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:26.185 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:26.243 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:55:26.248 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:55:26.249 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-22 10:55:26.250 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:26.253 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:26.255 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:26.256 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:55:26.258 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:55:26.259 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:26.278 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:26.293 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:26.303 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 10ms reading results.
2024-05-22 10:55:26.308 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:26.317 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (8ms).
2024-05-22 10:55:26.321 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:55:26.326 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:55:26.327 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 201.3741ms
2024-05-22 10:55:26.340 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:26.350 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" completed keep alive response.
2024-05-22 10:55:26.357 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:55:26.358 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:26.367 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (8ms).
2024-05-22 10:55:26.374 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 392.8394ms
2024-05-22 10:55:30.724 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:55:30.727 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:55:30.728 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:55:30.729 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:55:30.731 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:30.733 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:55:30.734 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:55:30.745 +01:00 [DBG] Authorization was successful.
2024-05-22 10:55:30.747 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:30.762 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:55:30.778 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:55:30.779 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:55:30.781 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:55:30.783 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:55:30.792 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:55:30.798 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:30.799 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:55:30.802 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:30.804 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:55:30.807 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:30.808 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:30.809 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:55:30.810 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:55:30.812 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:55:30.821 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:55:30.831 +01:00 [DBG] Created DbConnection. (10ms).
2024-05-22 10:55:30.832 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:30.848 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:30.861 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:30.864 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-22 10:55:30.866 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-05-22 10:55:30.880 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:30.909 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:55:30.927 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:30.942 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2024-05-22 10:55:30.958 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:30.968 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2024-05-22 10:55:30.977 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:30.980 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:30.994 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:31.008 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (14ms).
2024-05-22 10:55:31.010 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:55:31.024 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:55:31.049 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:55:31.080 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:31.097 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 16ms reading results.
2024-05-22 10:55:31.113 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:31.129 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:55:31.145 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:31.146 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:31.161 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:55:31.176 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:55:31.178 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-05-22 10:55:31.192 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:55:31.203 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:55:31.223 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:55:31.225 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:55:31.234 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:31.242 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 18ms reading results.
2024-05-22 10:55:31.264 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:55:31.280 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:55:31.285 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:55:31.317 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:55:31.331 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:55:31.344 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:55:31.348 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:55:31.362 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:55:31.377 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 579.1992ms
2024-05-22 10:55:31.386 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:55:31.389 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" completed keep alive response.
2024-05-22 10:55:31.394 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:55:31.396 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:55:31.409 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (12ms).
2024-05-22 10:55:31.411 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 687.533ms
2024-05-22 10:56:24.961 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:56:24.994 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:56:24.995 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:56:24.996 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:56:24.998 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:56:25.000 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:56:25.002 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:56:25.003 +01:00 [DBG] Authorization was successful.
2024-05-22 10:56:25.004 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:56:25.005 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:56:25.025 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:56:25.043 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:56:25.045 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:56:25.082 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:56:25.087 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:56:25.103 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:56:25.114 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:56:25.120 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:56:25.136 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:56:25.138 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:56:25.153 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:56:25.154 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:56:25.166 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:56:25.187 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:56:25.196 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:56:25.197 +01:00 [DBG] Created DbConnection. (1ms).
2024-05-22 10:56:25.199 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:56:25.201 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.212 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:56:25.228 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:56:25.229 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-22 10:56:25.251 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:56:25.296 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:56:25.329 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.352 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 22ms reading results.
2024-05-22 10:56:25.366 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.397 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (30ms).
2024-05-22 10:56:25.427 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:56:25.428 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.445 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:56:25.474 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2024-05-22 10:56:25.476 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (31ms).
2024-05-22 10:56:25.489 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:56:25.509 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:56:25.540 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.555 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2024-05-22 10:56:25.571 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.588 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:56:25.593 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:56:25.606 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.620 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:56:25.622 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:56:25.654 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (33ms).
2024-05-22 10:56:25.655 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:56:25.713 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:56:25.729 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:56:25.730 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:56:25.733 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.737 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-22 10:56:25.738 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:56:25.744 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (5ms).
2024-05-22 10:56:25.757 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:56:25.783 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:56:25.789 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:56:25.798 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:56:25.800 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:56:25.810 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:56:25.830 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 726.937ms
2024-05-22 10:56:25.846 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:56:25.848 +01:00 [DBG] Connection id "0HN3Q8L45NFSH" completed keep alive response.
2024-05-22 10:56:25.856 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:56:25.858 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:56:25.871 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (13ms).
2024-05-22 10:56:25.873 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 912.3301ms
2024-05-22 10:56:41.032 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:56:41.183 +01:00 [DBG] Hosting starting
2024-05-22 10:56:41.215 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:56:41.223 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:56:41.234 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:56:41.246 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:56:41.249 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:56:41.252 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:56:41.258 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:56:41.265 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:56:41.268 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:56:41.272 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:56:41.278 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:56:41.477 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:56:41.478 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:56:41.479 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:56:41.481 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:56:41.482 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:56:41.483 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:56:41.484 +01:00 [INF] Hosting environment: Development
2024-05-22 10:56:41.485 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:56:41.486 +01:00 [DBG] Hosting started
2024-05-22 10:56:49.427 +01:00 [DBG] Connection id "0HN3Q8LVRSAHA" received FIN.
2024-05-22 10:56:49.432 +01:00 [DBG] Connection id "0HN3Q8LVRSAHA" accepted.
2024-05-22 10:56:49.433 +01:00 [DBG] Connection id "0HN3Q8LVRSAHA" started.
2024-05-22 10:56:49.435 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB" accepted.
2024-05-22 10:56:49.436 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB" started.
2024-05-22 10:56:49.451 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:56:49.493 +01:00 [DBG] Connection id "0HN3Q8LVRSAHA" stopped.
2024-05-22 10:56:49.495 +01:00 [DBG] Connection 0HN3Q8LVRSAHB established using the following protocol: "Tls13"
2024-05-22 10:56:49.499 +01:00 [DBG] Connection id "0HN3Q8LVRSAHA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:56:49.532 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 10:56:49.549 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:56:49.564 +01:00 [DBG] POST requests are not supported
2024-05-22 10:56:49.586 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 10:56:49.590 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 10:56:49.604 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:56:49.670 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 10:56:49.675 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:56:49.691 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 10:56:49.704 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:56:49.718 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:56:49.720 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:56:49.748 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:56:49.752 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:56:49.767 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:56:49.771 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:56:49.792 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:56:49.796 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 10:56:49.810 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 10:56:49.822 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 10:56:49.839 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB", Request id "0HN3Q8LVRSAHB:00000001": started reading request body.
2024-05-22 10:56:49.841 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB", Request id "0HN3Q8LVRSAHB:00000001": done reading request body.
2024-05-22 10:56:49.926 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:56:49.929 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:56:49.931 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:56:49.937 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:56:49.969 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:56:49.976 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:56:49.977 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:56:49.979 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:56:49.981 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 10:56:49.983 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 10:56:49.993 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 224.5785ms
2024-05-22 10:56:49.999 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:56:50.001 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB" completed keep alive response.
2024-05-22 10:56:50.015 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 486.6438ms
2024-05-22 10:56:59.105 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:56:59.112 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:56:59.113 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:56:59.114 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:56:59.116 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:56:59.151 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:56:59.153 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:56:59.159 +01:00 [DBG] Authorization was successful.
2024-05-22 10:56:59.161 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:56:59.167 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:56:59.171 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:56:59.179 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:56:59.181 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:56:59.193 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:56:59.203 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:56:59.211 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:56:59.323 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:56:59.339 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:56:59.341 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:56:59.344 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:56:59.346 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:56:59.355 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:56:59.357 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:56:59.361 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:56:59.892 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:56:59.917 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 10:57:00.056 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:57:00.085 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:57:00.096 +01:00 [DBG] Created DbConnection. (10ms).
2024-05-22 10:57:00.100 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:00.111 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.117 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:57:00.134 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:57:00.140 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2024-05-22 10:57:00.159 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:00.183 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:00.220 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.238 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 18ms reading results.
2024-05-22 10:57:00.260 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.270 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2024-05-22 10:57:00.274 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 10:57:00.277 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:57:00.287 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:00.290 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.292 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:57:00.293 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:57:00.294 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:57:00.298 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:57:00.314 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:57:00.339 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.346 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-22 10:57:00.356 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.362 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (5ms).
2024-05-22 10:57:00.375 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 10:57:00.411 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:57:00.419 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:00.429 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.431 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:57:00.432 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-22 10:57:00.433 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:57:00.434 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:57:00.464 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:57:00.494 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:57:00.511 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:57:00.513 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.518 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 38ms reading results.
2024-05-22 10:57:00.534 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:00.550 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:57:00.577 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:57:00.599 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:57:00.614 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:57:00.615 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:57:00.628 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:57:00.629 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:57:00.660 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1448.9102ms
2024-05-22 10:57:00.663 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:00.665 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB" completed keep alive response.
2024-05-22 10:57:00.667 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:57:00.672 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:00.675 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-22 10:57:00.677 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 1571.7624ms
2024-05-22 10:57:06.629 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:57:06.633 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:57:06.634 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:57:06.635 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:57:06.639 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:06.644 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:57:06.645 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:57:06.648 +01:00 [DBG] Authorization was successful.
2024-05-22 10:57:06.654 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:06.665 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:57:06.684 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:57:06.699 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:57:06.701 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:57:06.728 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:57:06.732 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:57:06.747 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:57:06.761 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:57:06.764 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:57:06.780 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:57:06.782 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:06.797 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:06.798 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:57:06.813 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:06.825 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:57:06.833 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:57:06.846 +01:00 [DBG] Created DbConnection. (13ms).
2024-05-22 10:57:06.847 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:06.861 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:06.862 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:57:06.863 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:57:06.865 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:57:06.866 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:06.869 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:06.880 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:06.881 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-22 10:57:06.883 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:06.891 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (7ms).
2024-05-22 10:57:06.900 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:57:06.908 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:57:06.921 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 174.9146ms
2024-05-22 10:57:06.946 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:06.950 +01:00 [DBG] Connection id "0HN3Q8LVRSAHB" completed keep alive response.
2024-05-22 10:57:06.951 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:57:06.966 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:06.968 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:57:06.982 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 353.1878ms
2024-05-22 10:57:34.447 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 10:57:34.607 +01:00 [DBG] Hosting starting
2024-05-22 10:57:34.640 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 10:57:34.647 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 10:57:34.657 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 10:57:34.665 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 10:57:34.669 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:57:34.671 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 10:57:34.672 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 10:57:34.677 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 10:57:34.679 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 10:57:34.681 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 10:57:34.687 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 10:57:34.875 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 10:57:34.876 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 10:57:34.877 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 10:57:34.878 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 10:57:34.879 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 10:57:34.880 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 10:57:34.882 +01:00 [INF] Hosting environment: Development
2024-05-22 10:57:34.884 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 10:57:34.885 +01:00 [DBG] Hosting started
2024-05-22 10:57:35.000 +01:00 [DBG] Connection id "0HN3Q8MDEG7RM" received FIN.
2024-05-22 10:57:35.006 +01:00 [DBG] Connection id "0HN3Q8MDEG7RM" accepted.
2024-05-22 10:57:35.007 +01:00 [DBG] Connection id "0HN3Q8MDEG7RM" started.
2024-05-22 10:57:35.009 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" accepted.
2024-05-22 10:57:35.010 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" started.
2024-05-22 10:57:35.022 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 10:57:35.063 +01:00 [DBG] Connection 0HN3Q8MDEG7RN established using the following protocol: "Tls13"
2024-05-22 10:57:35.067 +01:00 [DBG] Connection id "0HN3Q8MDEG7RM" stopped.
2024-05-22 10:57:35.068 +01:00 [DBG] Connection id "0HN3Q8MDEG7RM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 10:57:35.097 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:57:35.112 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 10:57:35.126 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:57:35.151 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:57:35.155 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:57:35.180 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:35.316 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:57:35.319 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:57:35.323 +01:00 [DBG] Authorization was successful.
2024-05-22 10:57:35.325 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:35.346 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:57:35.362 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:57:35.364 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:57:35.379 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:57:35.395 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:57:35.411 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:57:35.428 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:57:35.550 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 10:57:35.565 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:57:35.591 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:57:35.597 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:57:35.599 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:35.612 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:35.615 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:57:35.631 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:36.161 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:57:36.187 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 10:57:36.326 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:57:36.356 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:57:36.366 +01:00 [DBG] Created DbConnection. (7ms).
2024-05-22 10:57:36.373 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:36.385 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:36.390 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:57:36.404 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2024-05-22 10:57:36.409 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2024-05-22 10:57:36.420 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:36.450 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:36.462 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:36.482 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 21ms reading results.
2024-05-22 10:57:36.498 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:36.513 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (14ms).
2024-05-22 10:57:36.517 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:57:36.528 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:57:36.532 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1102.5086ms
2024-05-22 10:57:36.544 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:36.561 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" completed keep alive response.
2024-05-22 10:57:36.564 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:57:36.579 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:36.582 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-22 10:57:36.592 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 1499.2298ms
2024-05-22 10:57:42.422 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:57:42.425 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:57:42.427 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:57:42.428 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:57:42.430 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:42.436 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:57:42.438 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:57:42.441 +01:00 [DBG] Authorization was successful.
2024-05-22 10:57:42.445 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:42.457 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:57:42.477 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:57:42.492 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:57:42.494 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:57:42.509 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:57:42.525 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:57:42.540 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:57:42.556 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:57:42.565 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:57:42.572 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:57:42.573 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:42.589 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:42.592 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:57:42.608 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:57:42.620 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:57:42.626 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:57:42.627 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-22 10:57:42.628 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:42.633 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:42.645 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:57:42.649 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-05-22 10:57:42.663 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2024-05-22 10:57:42.665 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:42.694 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:57:42.726 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:42.742 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 16ms reading results.
2024-05-22 10:57:42.758 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:57:42.774 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 10:57:42.791 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:57:42.792 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:57:42.808 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 267.7997ms
2024-05-22 10:57:42.823 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:57:42.833 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" completed keep alive response.
2024-05-22 10:57:42.835 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:57:42.837 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:57:42.839 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:57:42.840 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 418.7774ms
2024-05-22 10:57:48.027 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 10:57:48.034 +01:00 [DBG] POST requests are not supported
2024-05-22 10:57:48.035 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 10:57:48.038 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 10:57:48.041 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:57:48.043 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 10:57:48.045 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:57:48.052 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 10:57:48.071 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:57:48.073 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:57:48.087 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:57:48.112 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:57:48.115 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:57:48.144 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:57:48.161 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 10:57:48.176 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:57:48.196 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 10:57:48.211 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 10:57:48.226 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 10:57:48.253 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN", Request id "0HN3Q8MDEG7RN:00000003": started reading request body.
2024-05-22 10:57:48.258 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN", Request id "0HN3Q8MDEG7RN:00000003": done reading request body.
2024-05-22 10:57:48.321 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:57:48.323 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:57:48.325 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 10:57:48.330 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 10:57:48.346 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:57:48.378 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:57:48.382 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:57:48.396 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:57:48.413 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 10:57:48.426 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 10:57:48.429 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 284.8734ms
2024-05-22 10:57:48.442 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 10:57:48.444 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" completed keep alive response.
2024-05-22 10:57:48.449 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 422.1837ms
2024-05-22 10:58:01.128 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 10:58:01.131 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:58:01.132 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:58:01.133 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 10:58:01.135 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:58:01.138 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:58:01.139 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:58:01.144 +01:00 [DBG] Authorization was successful.
2024-05-22 10:58:01.145 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:58:01.157 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:58:01.168 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:58:01.169 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:58:01.175 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:58:01.189 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:58:01.199 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:58:01.203 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:58:01.220 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:58:01.230 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:58:01.234 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:58:01.235 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:58:01.250 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:58:01.251 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:58:01.260 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:58:01.307 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:58:01.310 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:58:01.311 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-22 10:58:01.312 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:58:01.314 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:01.316 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:58:01.317 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:58:01.318 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:58:01.319 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:58:01.324 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:58:01.334 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:01.336 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-22 10:58:01.340 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:01.345 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2024-05-22 10:58:01.359 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 10:58:01.360 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 10:58:01.375 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 171.9742ms
2024-05-22 10:58:01.386 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:58:01.391 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" completed keep alive response.
2024-05-22 10:58:01.392 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:58:01.402 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:58:01.403 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:58:01.409 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 281.6273ms
2024-05-22 10:58:05.067 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 10:58:05.070 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 10:58:05.071 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:58:05.072 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 10:58:05.074 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:58:05.076 +01:00 [DBG] Successfully validated the token.
2024-05-22 10:58:05.077 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 10:58:05.078 +01:00 [DBG] Authorization was successful.
2024-05-22 10:58:05.079 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:58:05.082 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 10:58:05.107 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 10:58:05.121 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 10:58:05.123 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 10:58:05.136 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 10:58:05.151 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 10:58:05.160 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:58:05.162 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 10:58:05.169 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:58:05.181 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 10:58:05.193 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:58:05.196 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:58:05.212 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 10:58:05.213 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 10:58:05.229 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 10:58:05.244 +01:00 [DBG] Creating DbConnection.
2024-05-22 10:58:05.245 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-22 10:58:05.260 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:58:05.261 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.277 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:58:05.293 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-22 10:58:05.295 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2024-05-22 10:58:05.309 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:58:05.339 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 10:58:05.364 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.370 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2024-05-22 10:58:05.386 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.394 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (8ms).
2024-05-22 10:58:05.399 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 10:58:05.417 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 10:58:05.438 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:58:05.440 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.441 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:58:05.442 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:58:05.443 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 10:58:05.445 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:58:05.451 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 10:58:05.454 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.456 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-22 10:58:05.457 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.459 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 10:58:05.473 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 10:58:05.501 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 10:58:05.541 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:58:05.543 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.544 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 10:58:05.545 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 10:58:05.548 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-22 10:58:05.549 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:58:05.564 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 10:58:05.593 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 10:58:05.609 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.612 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 31ms reading results.
2024-05-22 10:58:05.628 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 10:58:05.644 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (16ms).
2024-05-22 10:58:05.669 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 10:58:05.691 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 10:58:05.706 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 10:58:05.721 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 10:58:05.722 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 10:58:05.733 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 10:58:05.765 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 605.0721ms
2024-05-22 10:58:05.775 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 10:58:05.777 +01:00 [DBG] Connection id "0HN3Q8MDEG7RN" completed keep alive response.
2024-05-22 10:58:05.778 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 10:58:05.783 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 10:58:05.793 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (9ms).
2024-05-22 10:58:05.797 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 200 110 application/json; charset=utf-8 729.9665ms
2024-05-22 15:57:04.873 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 15:57:04.984 +01:00 [DBG] Hosting starting
2024-05-22 15:57:05.024 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 15:57:05.031 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 15:57:05.039 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 15:57:05.048 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 15:57:05.051 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 15:57:05.053 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 15:57:05.055 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 15:57:05.062 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 15:57:05.065 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 15:57:05.067 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 15:57:05.068 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 15:57:05.280 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 15:57:05.281 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 15:57:05.282 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 15:57:05.283 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 15:57:05.284 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 15:57:05.285 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 15:57:05.286 +01:00 [INF] Hosting environment: Development
2024-05-22 15:57:05.287 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 15:57:05.288 +01:00 [DBG] Hosting started
2024-05-22 15:57:14.841 +01:00 [DBG] Connection id "0HN3QDTRRKBEK" received FIN.
2024-05-22 15:57:14.849 +01:00 [DBG] Connection id "0HN3QDTRRKBEK" accepted.
2024-05-22 15:57:14.851 +01:00 [DBG] Connection id "0HN3QDTRRKBEK" started.
2024-05-22 15:57:14.853 +01:00 [DBG] Connection id "0HN3QDTRRKBEL" accepted.
2024-05-22 15:57:14.854 +01:00 [DBG] Connection id "0HN3QDTRRKBEL" started.
2024-05-22 15:57:14.872 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 15:57:14.923 +01:00 [DBG] Connection 0HN3QDTRRKBEL established using the following protocol: "Tls13"
2024-05-22 15:57:14.940 +01:00 [DBG] Connection id "0HN3QDTRRKBEK" stopped.
2024-05-22 15:57:14.945 +01:00 [DBG] Connection id "0HN3QDTRRKBEK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 15:57:14.974 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 15:57:14.989 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 15:57:15.000 +01:00 [DBG] POST requests are not supported
2024-05-22 15:57:15.020 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 15:57:15.024 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 15:57:15.028 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:57:15.087 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 15:57:15.090 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:57:15.106 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 15:57:15.124 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 15:57:15.126 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 15:57:15.138 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 15:57:15.140 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 15:57:15.142 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 15:57:15.150 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 15:57:15.162 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 15:57:15.196 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 15:57:15.210 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 15:57:15.224 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 15:57:15.239 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 15:57:15.265 +01:00 [DBG] Connection id "0HN3QDTRRKBEL", Request id "0HN3QDTRRKBEL:00000001": started reading request body.
2024-05-22 15:57:15.267 +01:00 [DBG] Connection id "0HN3QDTRRKBEL", Request id "0HN3QDTRRKBEL:00000001": done reading request body.
2024-05-22 15:57:15.379 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:57:15.382 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:57:15.384 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 15:57:15.390 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:57:15.423 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 15:57:15.428 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 15:57:15.428 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 15:57:15.429 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 15:57:15.432 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 15:57:15.434 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 15:57:15.440 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 289.7557ms
2024-05-22 15:57:15.446 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:57:15.459 +01:00 [DBG] Connection id "0HN3QDTRRKBEL" completed keep alive response.
2024-05-22 15:57:15.461 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 491.1884ms
2024-05-22 15:57:37.551 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 15:57:37.557 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 15:57:37.560 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 15:57:37.561 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 15:57:37.566 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:57:37.619 +01:00 [DBG] Successfully validated the token.
2024-05-22 15:57:37.621 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 15:57:37.625 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-22 15:57:37.629 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 15:57:37.631 +01:00 [DBG] Connection id "0HN3QDTRRKBEL" completed keep alive response.
2024-05-22 15:57:37.633 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 82.1094ms
2024-05-22 15:57:54.196 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 15:57:54.200 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 15:57:54.200 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 15:57:54.201 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 15:57:54.203 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:57:54.206 +01:00 [DBG] Successfully validated the token.
2024-05-22 15:57:54.207 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 15:57:54.215 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-22 15:57:54.222 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 15:57:54.229 +01:00 [DBG] Connection id "0HN3QDTRRKBEL" completed keep alive response.
2024-05-22 15:57:54.233 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 403 0 null 36.6457ms
2024-05-22 15:58:12.780 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 15:58:12.893 +01:00 [DBG] Hosting starting
2024-05-22 15:58:12.924 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 15:58:12.931 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 15:58:12.940 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 15:58:12.948 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 15:58:12.953 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 15:58:12.955 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 15:58:12.956 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 15:58:12.970 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 15:58:12.973 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 15:58:12.979 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 15:58:12.980 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 15:58:13.147 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 15:58:13.148 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 15:58:13.150 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 15:58:13.151 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 15:58:13.152 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 15:58:13.153 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 15:58:13.154 +01:00 [INF] Hosting environment: Development
2024-05-22 15:58:13.155 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 15:58:13.156 +01:00 [DBG] Hosting started
2024-05-22 15:58:18.354 +01:00 [DBG] Connection id "0HN3QDUEPAT9K" received FIN.
2024-05-22 15:58:18.359 +01:00 [DBG] Connection id "0HN3QDUEPAT9K" accepted.
2024-05-22 15:58:18.361 +01:00 [DBG] Connection id "0HN3QDUEPAT9K" started.
2024-05-22 15:58:18.362 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" accepted.
2024-05-22 15:58:18.364 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" started.
2024-05-22 15:58:18.377 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 15:58:18.426 +01:00 [DBG] Connection 0HN3QDUEPAT9L established using the following protocol: "Tls13"
2024-05-22 15:58:18.427 +01:00 [DBG] Connection id "0HN3QDUEPAT9K" stopped.
2024-05-22 15:58:18.430 +01:00 [DBG] Connection id "0HN3QDUEPAT9K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 15:58:18.459 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 15:58:18.473 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 15:58:18.485 +01:00 [DBG] POST requests are not supported
2024-05-22 15:58:18.508 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 15:58:18.512 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 15:58:18.516 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:58:18.589 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 15:58:18.592 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:58:18.607 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 15:58:18.625 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 15:58:18.627 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 15:58:18.639 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 15:58:18.649 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 15:58:18.655 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 15:58:18.666 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 15:58:18.672 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 15:58:18.706 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 15:58:18.713 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 15:58:18.730 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 15:58:18.742 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 15:58:18.757 +01:00 [DBG] Connection id "0HN3QDUEPAT9L", Request id "0HN3QDUEPAT9L:00000001": started reading request body.
2024-05-22 15:58:18.759 +01:00 [DBG] Connection id "0HN3QDUEPAT9L", Request id "0HN3QDUEPAT9L:00000001": done reading request body.
2024-05-22 15:58:18.840 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:58:18.843 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:58:18.845 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 15:58:18.855 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:58:18.890 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 15:58:18.898 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 15:58:18.898 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 15:58:18.900 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 15:58:18.906 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 15:58:18.914 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 15:58:18.922 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 255.9088ms
2024-05-22 15:58:18.925 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:58:18.926 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" completed keep alive response.
2024-05-22 15:58:18.941 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 486.3935ms
2024-05-22 15:58:34.125 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - null null
2024-05-22 15:58:34.135 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 15:58:34.138 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2024-05-22 15:58:34.139 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2024-05-22 15:58:34.155 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:58:34.199 +01:00 [DBG] Successfully validated the token.
2024-05-22 15:58:34.202 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 15:58:34.206 +01:00 [DBG] Authorization was successful.
2024-05-22 15:58:34.207 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:58:34.214 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 15:58:34.244 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 15:58:34.246 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 15:58:34.260 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 15:58:34.276 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 15:58:34.292 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 15:58:34.306 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 15:58:34.433 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-22 15:58:34.447 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 15:58:34.461 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 15:58:34.463 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 15:58:34.468 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:58:34.479 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:58:34.482 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 15:58:34.492 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:58:35.037 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 15:58:35.063 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-22 15:58:35.194 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 15:58:35.229 +01:00 [DBG] Creating DbConnection.
2024-05-22 15:58:35.240 +01:00 [DBG] Created DbConnection. (9ms).
2024-05-22 15:58:35.244 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:58:35.258 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.263 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:58:35.270 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-05-22 15:58:35.283 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2024-05-22 15:58:35.290 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 15:58:35.332 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 15:58:35.367 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.379 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2024-05-22 15:58:35.393 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.404 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2024-05-22 15:58:35.407 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-22 15:58:35.420 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 15:58:35.442 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:58:35.444 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.445 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:58:35.446 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-22 15:58:35.447 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 15:58:35.454 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 15:58:35.457 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 15:58:35.460 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.461 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-22 15:58:35.472 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.474 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 15:58:35.478 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-22 15:58:35.524 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-22 15:58:35.551 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:58:35.553 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.555 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:58:35.556 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-22 15:58:35.557 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 15:58:35.558 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 15:58:35.575 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-22 15:58:35.621 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:58:35.638 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:58:35.642 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.660 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 53ms reading results.
2024-05-22 15:58:35.677 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:35.692 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-22 15:58:35.718 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 15:58:35.738 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 15:58:35.739 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 15:58:35.748 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 15:58:35.754 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 15:58:35.763 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-22 15:58:35.806 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1499.1194ms
2024-05-22 15:58:35.808 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:58:35.809 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" completed keep alive response.
2024-05-22 15:58:35.812 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 15:58:35.817 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:58:35.820 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (4ms).
2024-05-22 15:58:35.822 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointsofinterest - 200 238 application/json; charset=utf-8 1697.4034ms
2024-05-22 15:58:45.060 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-22 15:58:45.063 +01:00 [DBG] The request path  does not match the path filter
2024-05-22 15:58:45.065 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-22 15:58:45.066 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-22 15:58:45.074 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:58:45.085 +01:00 [DBG] Successfully validated the token.
2024-05-22 15:58:45.091 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 15:58:45.094 +01:00 [DBG] Authorization was successful.
2024-05-22 15:58:45.108 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:58:45.122 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 15:58:45.137 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 15:58:45.146 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 15:58:45.148 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 15:58:45.162 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 15:58:45.169 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 15:58:45.178 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 15:58:45.182 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 15:58:45.188 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 15:58:45.201 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 15:58:45.212 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:58:45.215 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:58:45.228 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 15:58:45.230 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:58:45.255 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 15:58:45.262 +01:00 [DBG] Creating DbConnection.
2024-05-22 15:58:45.263 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-22 15:58:45.265 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:58:45.279 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:45.294 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:58:45.296 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-05-22 15:58:45.310 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-22 15:58:45.312 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 15:58:45.341 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-22 15:58:45.353 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:45.354 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-22 15:58:45.361 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:58:45.374 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (13ms).
2024-05-22 15:58:45.386 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-22 15:58:45.389 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 15:58:45.390 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 211.297ms
2024-05-22 15:58:45.405 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-22 15:58:45.414 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" completed keep alive response.
2024-05-22 15:58:45.422 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 15:58:45.428 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:58:45.438 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (9ms).
2024-05-22 15:58:45.439 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 378.8623ms
2024-05-22 15:58:57.632 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/3/pointsofinterest - application/json 117
2024-05-22 15:58:57.637 +01:00 [DBG] POST requests are not supported
2024-05-22 15:58:57.638 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-05-22 15:58:57.639 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-05-22 15:58:57.641 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-05-22 15:58:57.643 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 15:58:57.653 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-22 15:58:57.661 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-22 15:58:57.679 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-22 15:58:57.681 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" completed keep alive response.
2024-05-22 15:58:57.697 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/3/pointsofinterest - 401 0 null 64.3874ms
2024-05-22 15:58:57.727 +01:00 [DBG] Connection id "0HN3QDUEPAT9L", Request id "0HN3QDUEPAT9L:00000004": started reading request body.
2024-05-22 15:58:57.729 +01:00 [DBG] Connection id "0HN3QDUEPAT9L", Request id "0HN3QDUEPAT9L:00000004": done reading request body.
2024-05-22 15:59:15.262 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/3/pointsofinterest - application/json 117
2024-05-22 15:59:15.267 +01:00 [DBG] POST requests are not supported
2024-05-22 15:59:15.268 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-05-22 15:59:15.269 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-05-22 15:59:15.271 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-05-22 15:59:15.273 +01:00 [DBG] Successfully validated the token.
2024-05-22 15:59:15.278 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 15:59:15.279 +01:00 [DBG] Authorization was successful.
2024-05-22 15:59:15.293 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-05-22 15:59:15.311 +01:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-22 15:59:15.325 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 15:59:15.340 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 15:59:15.341 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 15:59:15.369 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 15:59:15.373 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 15:59:15.387 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 15:59:15.400 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-22 15:59:15.404 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-22 15:59:15.419 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-22 15:59:15.420 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:59:15.434 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:59:15.436 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-22 15:59:15.444 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-22 15:59:15.450 +01:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-05-22 15:59:15.451 +01:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-05-22 15:59:15.461 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 15:59:15.475 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 15:59:15.477 +01:00 [DBG] Connection id "0HN3QDUEPAT9L", Request id "0HN3QDUEPAT9L:00000005": started reading request body.
2024-05-22 15:59:15.482 +01:00 [DBG] Connection id "0HN3QDUEPAT9L", Request id "0HN3QDUEPAT9L:00000005": done reading request body.
2024-05-22 15:59:15.494 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-05-22 15:59:15.505 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-05-22 15:59:15.508 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-05-22 15:59:15.510 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-05-22 15:59:15.569 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-22 15:59:15.573 +01:00 [DBG] Creating DbConnection.
2024-05-22 15:59:15.573 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-22 15:59:15.574 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:59:15.575 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.577 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:59:15.578 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 15:59:15.579 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-22 15:59:15.582 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 15:59:15.584 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-22 15:59:15.587 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.595 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-22 15:59:15.598 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.601 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-22 15:59:15.607 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-05-22 15:59:15.627 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-22 15:59:15.658 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:59:15.660 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.661 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:59:15.662 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 15:59:15.665 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-22 15:59:15.669 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-05-22 15:59:15.679 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2024-05-22 15:59:15.700 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:59:15.709 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.719 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 24ms reading results.
2024-05-22 15:59:15.744 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.759 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (14ms).
2024-05-22 15:59:15.763 +01:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-05-22 15:59:15.777 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-05-22 15:59:15.792 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:59:15.812 +01:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:59:15.821 +01:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:59:15.834 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:59:15.844 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-05-22 15:59:15.892 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:59:15.893 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.896 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-22 15:59:15.898 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-22 15:59:15.900 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-22 15:59:15.901 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-05-22 15:59:15.903 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2024-05-22 15:59:15.915 +01:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-05-22 15:59:15.941 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.945 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 39ms reading results.
2024-05-22 15:59:15.958 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-22 15:59:15.962 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-22 15:59:15.983 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-22 15:59:15.985 +01:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-05-22 15:59:15.995 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 15:59:16.023 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 15:59:16.024 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 15:59:16.039 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 15:59:16.039 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-22 15:59:16.056 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-05-22 15:59:16.085 +01:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address GetPointOfInterest(cityId=[3],pointOfInterestId=[9])
2024-05-22 15:59:16.090 +01:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/cities/3/pointsofinterest/9 and 
2024-05-22 15:59:16.116 +01:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/cities/3/pointsofinterest/9
2024-05-22 15:59:16.131 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 744.1297ms
2024-05-22 15:59:16.162 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-05-22 15:59:16.194 +01:00 [DBG] Connection id "0HN3QDUEPAT9L" completed keep alive response.
2024-05-22 15:59:16.196 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-22 15:59:16.210 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-22 15:59:16.212 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-22 15:59:16.226 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/3/pointsofinterest - 201 111 application/json; charset=utf-8 964.8291ms
2024-05-22 15:59:41.989 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 15:59:42.122 +01:00 [DBG] Hosting starting
2024-05-22 15:59:42.204 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 15:59:42.217 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 15:59:42.225 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 15:59:42.233 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 15:59:42.238 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 15:59:42.241 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 15:59:42.242 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 15:59:42.248 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 15:59:42.255 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 15:59:42.258 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 15:59:42.268 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 15:59:42.428 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 15:59:42.430 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 15:59:42.431 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 15:59:42.433 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 15:59:42.434 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 15:59:42.435 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 15:59:42.437 +01:00 [INF] Hosting environment: Development
2024-05-22 15:59:42.439 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 15:59:42.440 +01:00 [DBG] Hosting started
2024-05-22 15:59:52.696 +01:00 [DBG] Connection id "0HN3QDVAT1JVD" received FIN.
2024-05-22 15:59:52.701 +01:00 [DBG] Connection id "0HN3QDVAT1JVD" accepted.
2024-05-22 15:59:52.704 +01:00 [DBG] Connection id "0HN3QDVAT1JVD" started.
2024-05-22 15:59:52.705 +01:00 [DBG] Connection id "0HN3QDVAT1JVE" accepted.
2024-05-22 15:59:52.706 +01:00 [DBG] Connection id "0HN3QDVAT1JVE" started.
2024-05-22 15:59:52.720 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-22 15:59:52.770 +01:00 [DBG] Connection 0HN3QDVAT1JVE established using the following protocol: "Tls13"
2024-05-22 15:59:52.772 +01:00 [DBG] Connection id "0HN3QDVAT1JVD" stopped.
2024-05-22 15:59:52.774 +01:00 [DBG] Connection id "0HN3QDVAT1JVD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-22 15:59:52.805 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - application/json 115
2024-05-22 15:59:52.820 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-22 15:59:52.829 +01:00 [DBG] POST requests are not supported
2024-05-22 15:59:52.852 +01:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2024-05-22 15:59:52.855 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2024-05-22 15:59:52.865 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:59:52.937 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-22 15:59:52.940 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:59:52.956 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2024-05-22 15:59:52.974 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-22 15:59:52.977 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-22 15:59:52.985 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-22 15:59:52.988 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-22 15:59:52.989 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-22 15:59:52.992 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 15:59:52.994 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2024-05-22 15:59:53.020 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 15:59:53.031 +01:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2024-05-22 15:59:53.041 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-05-22 15:59:53.046 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-05-22 15:59:53.072 +01:00 [DBG] Connection id "0HN3QDVAT1JVE", Request id "0HN3QDVAT1JVE:00000001": started reading request body.
2024-05-22 15:59:53.078 +01:00 [DBG] Connection id "0HN3QDVAT1JVE", Request id "0HN3QDVAT1JVE:00000001": done reading request body.
2024-05-22 15:59:53.156 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:59:53.159 +01:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:59:53.161 +01:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2024-05-22 15:59:53.168 +01:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2024-05-22 15:59:53.204 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-22 15:59:53.209 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-22 15:59:53.210 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-22 15:59:53.211 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-22 15:59:53.213 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-05-22 15:59:53.216 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-22 15:59:53.222 +01:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 229.5438ms
2024-05-22 15:59:53.225 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2024-05-22 15:59:53.231 +01:00 [DBG] Connection id "0HN3QDVAT1JVE" completed keep alive response.
2024-05-22 15:59:53.240 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/authentication/authenticate - 200 null text/plain; charset=utf-8 438.6596ms
2024-05-22 16:00:05.169 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/3/pointsofinterest - application/json 117
2024-05-22 16:00:05.172 +01:00 [DBG] POST requests are not supported
2024-05-22 16:00:05.174 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2024-05-22 16:00:05.175 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2024-05-22 16:00:05.177 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-05-22 16:00:05.212 +01:00 [DBG] Successfully validated the token.
2024-05-22 16:00:05.214 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-22 16:00:05.220 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-22 16:00:05.224 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-22 16:00:05.225 +01:00 [DBG] Connection id "0HN3QDVAT1JVE" completed keep alive response.
2024-05-22 16:00:05.229 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/3/pointsofinterest - 403 0 null 60.34ms
2024-05-22 16:00:05.232 +01:00 [DBG] Connection id "0HN3QDVAT1JVE", Request id "0HN3QDVAT1JVE:00000002": started reading request body.
2024-05-22 16:00:05.245 +01:00 [DBG] Connection id "0HN3QDVAT1JVE", Request id "0HN3QDVAT1JVE:00000002": done reading request body.
2024-05-22 16:16:40.559 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 16:16:40.637 +01:00 [DBG] Hosting starting
2024-05-22 16:16:40.659 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 16:16:40.667 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 16:16:40.675 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 16:16:40.682 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 16:16:40.686 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 16:16:40.688 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 16:16:40.690 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 16:16:40.694 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 16:16:40.696 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 16:16:40.698 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 16:16:40.699 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 16:16:40.736 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 16:16:40.738 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 16:16:40.739 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 16:16:40.740 +01:00 [INF] Hosting environment: Development
2024-05-22 16:16:40.741 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 16:16:40.741 +01:00 [DBG] Hosting started
2024-05-22 16:21:12.576 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 16:21:12.695 +01:00 [DBG] Hosting starting
2024-05-22 16:21:12.726 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 16:21:12.733 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 16:21:12.743 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 16:21:12.750 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 16:21:12.753 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 16:21:12.759 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 16:21:12.761 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 16:21:12.769 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 16:21:12.778 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 16:21:12.780 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 16:21:12.791 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 16:21:12.951 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 16:21:12.953 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 16:21:12.954 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 16:21:12.955 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 16:21:12.957 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 16:21:12.958 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 16:21:12.959 +01:00 [INF] Hosting environment: Development
2024-05-22 16:21:12.960 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 16:21:12.961 +01:00 [DBG] Hosting started
2024-05-22 16:32:40.123 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-22 16:32:40.235 +01:00 [DBG] Hosting starting
2024-05-22 16:32:40.273 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-22 16:32:40.283 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-22 16:32:40.292 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-22 16:32:40.300 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-22 16:32:40.304 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 16:32:40.306 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-22 16:32:40.308 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-22 16:32:40.312 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-22 16:32:40.315 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-22 16:32:40.317 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-22 16:32:40.318 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-22 16:32:40.483 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-22 16:32:40.485 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-22 16:32:40.486 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-22 16:32:40.487 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-22 16:32:40.488 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-22 16:32:40.489 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-22 16:32:40.490 +01:00 [INF] Hosting environment: Development
2024-05-22 16:32:40.490 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-22 16:32:40.491 +01:00 [DBG] Hosting started
