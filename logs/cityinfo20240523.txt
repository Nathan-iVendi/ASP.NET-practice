2024-05-23 10:54:17.422 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 10:54:17.558 +01:00 [DBG] Hosting starting
2024-05-23 10:54:17.589 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 10:54:17.596 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 10:54:17.605 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 10:54:17.614 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 10:54:17.619 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 10:54:17.621 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 10:54:17.622 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 10:54:17.627 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 10:54:17.630 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 10:54:17.632 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 10:54:17.634 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 10:54:17.855 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 10:54:17.856 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 10:54:17.857 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 10:54:17.858 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 10:54:17.860 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 10:54:17.861 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 10:54:17.863 +01:00 [INF] Hosting environment: Development
2024-05-23 10:54:17.864 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 10:54:17.866 +01:00 [DBG] Hosting started
2024-05-23 10:54:31.633 +01:00 [DBG] Connection id "0HN3R1PC0CHB2" received FIN.
2024-05-23 10:54:31.638 +01:00 [DBG] Connection id "0HN3R1PC0CHB2" accepted.
2024-05-23 10:54:31.641 +01:00 [DBG] Connection id "0HN3R1PC0CHB2" started.
2024-05-23 10:54:31.643 +01:00 [DBG] Connection id "0HN3R1PC0CHB3" accepted.
2024-05-23 10:54:31.644 +01:00 [DBG] Connection id "0HN3R1PC0CHB3" started.
2024-05-23 10:54:31.657 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 10:54:31.695 +01:00 [DBG] Connection id "0HN3R1PC0CHB2" stopped.
2024-05-23 10:54:31.697 +01:00 [DBG] Connection id "0HN3R1PC0CHB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 10:54:31.701 +01:00 [DBG] Connection 0HN3R1PC0CHB3 established using the following protocol: "Tls13"
2024-05-23 10:54:31.736 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 10:54:31.753 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 10:54:31.766 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 10:54:31.784 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 10:54:31.788 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 10:54:31.791 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 10:54:31.917 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'SnhuvNRRv6QADNaDHCiyyxC5phMosI9K-hQlP3iEesY'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 10:54:31.922 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'SnhuvNRRv6QADNaDHCiyyxC5phMosI9K-hQlP3iEesY'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-05-23 10:54:31.928 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 10:54:31.931 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 10:54:31.935 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 10:54:31.949 +01:00 [DBG] Connection id "0HN3R1PC0CHB3" completed keep alive response.
2024-05-23 10:54:31.951 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 218.9016ms
2024-05-23 10:58:54.994 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 10:58:55.136 +01:00 [DBG] Hosting starting
2024-05-23 10:58:55.176 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 10:58:55.183 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 10:58:55.194 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 10:58:55.202 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 10:58:55.207 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 10:58:55.210 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 10:58:55.212 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 10:58:55.216 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 10:58:55.218 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 10:58:55.226 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 10:58:55.241 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 10:58:55.506 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 10:58:55.508 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 10:58:55.509 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 10:58:55.510 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 10:58:55.514 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 10:58:55.515 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 10:58:55.516 +01:00 [INF] Hosting environment: Development
2024-05-23 10:58:55.517 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 10:58:55.518 +01:00 [DBG] Hosting started
2024-05-23 10:59:01.485 +01:00 [DBG] Connection id "0HN3R1RSDSQV7" received FIN.
2024-05-23 10:59:01.490 +01:00 [DBG] Connection id "0HN3R1RSDSQV7" accepted.
2024-05-23 10:59:01.493 +01:00 [DBG] Connection id "0HN3R1RSDSQV7" started.
2024-05-23 10:59:01.494 +01:00 [DBG] Connection id "0HN3R1RSDSQV8" accepted.
2024-05-23 10:59:01.496 +01:00 [DBG] Connection id "0HN3R1RSDSQV8" started.
2024-05-23 10:59:01.509 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 10:59:01.550 +01:00 [DBG] Connection 0HN3R1RSDSQV8 established using the following protocol: "Tls13"
2024-05-23 10:59:01.551 +01:00 [DBG] Connection id "0HN3R1RSDSQV7" stopped.
2024-05-23 10:59:01.558 +01:00 [DBG] Connection id "0HN3R1RSDSQV7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 10:59:01.583 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 10:59:01.600 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 10:59:01.617 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 10:59:01.637 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 10:59:01.643 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 10:59:01.657 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 10:59:01.789 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuerAsync(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 10:59:01.799 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
2024-05-23 10:59:01.803 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 10:59:01.805 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 10:59:01.816 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 10:59:01.827 +01:00 [DBG] Connection id "0HN3R1RSDSQV8" completed keep alive response.
2024-05-23 10:59:01.830 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 250.9922ms
2024-05-23 10:59:41.234 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 10:59:41.237 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 10:59:41.240 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 10:59:41.243 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 10:59:41.247 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 10:59:41.250 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuerAsync(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 10:59:41.287 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
2024-05-23 10:59:41.296 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 10:59:41.305 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 10:59:41.314 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 10:59:41.328 +01:00 [DBG] Connection id "0HN3R1RSDSQV8" completed keep alive response.
2024-05-23 10:59:41.329 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 95.6614ms
2024-05-23 11:00:10.861 +01:00 [DBG] Config reload token fired. Checking for changes...
2024-05-23 11:00:11.125 +01:00 [DBG] Config reload token fired. Checking for changes...
2024-05-23 11:00:25.462 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:00:25.465 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:00:25.466 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:00:25.466 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:00:25.467 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:00:25.469 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:00:25.470 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuerAsync(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 11:00:25.473 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
2024-05-23 11:00:25.475 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:00:25.477 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 11:00:25.479 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:00:25.480 +01:00 [DBG] Connection id "0HN3R1RSDSQV8" completed keep alive response.
2024-05-23 11:00:25.481 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 19.0758ms
2024-05-23 11:01:11.103 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:01:11.112 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:01:11.112 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:01:11.113 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:01:11.115 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:01:11.117 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuerAsync(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 11:01:11.122 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
2024-05-23 11:01:11.124 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:01:11.125 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 11:01:11.126 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:01:11.127 +01:00 [DBG] Connection id "0HN3R1RSDSQV8" completed keep alive response.
2024-05-23 11:01:11.128 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 25.4483ms
2024-05-23 11:01:18.372 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:01:18.526 +01:00 [DBG] Hosting starting
2024-05-23 11:01:18.555 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:01:18.562 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:01:18.569 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:01:18.579 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:01:18.583 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:01:18.585 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:01:18.586 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:01:18.591 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:01:18.595 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:01:18.597 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:01:18.604 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:01:18.787 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:01:18.789 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:01:18.790 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:01:18.791 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:01:18.792 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:01:18.793 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:01:18.794 +01:00 [INF] Hosting environment: Development
2024-05-23 11:01:18.795 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:01:18.796 +01:00 [DBG] Hosting started
2024-05-23 11:01:25.265 +01:00 [DBG] Connection id "0HN3R1T7932SG" received FIN.
2024-05-23 11:01:25.274 +01:00 [DBG] Connection id "0HN3R1T7932SG" accepted.
2024-05-23 11:01:25.276 +01:00 [DBG] Connection id "0HN3R1T7932SG" started.
2024-05-23 11:01:25.277 +01:00 [DBG] Connection id "0HN3R1T7932SH" accepted.
2024-05-23 11:01:25.279 +01:00 [DBG] Connection id "0HN3R1T7932SH" started.
2024-05-23 11:01:25.291 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:01:25.329 +01:00 [DBG] Connection id "0HN3R1T7932SG" stopped.
2024-05-23 11:01:25.330 +01:00 [DBG] Connection 0HN3R1T7932SH established using the following protocol: "Tls13"
2024-05-23 11:01:25.331 +01:00 [DBG] Connection id "0HN3R1T7932SG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:01:25.361 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:01:25.375 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:01:25.389 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:01:25.411 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:01:25.414 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:01:25.417 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:01:25.531 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuerAsync(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 11:01:25.535 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
2024-05-23 11:01:25.540 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:01:25.543 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 11:01:25.548 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:01:25.558 +01:00 [DBG] Connection id "0HN3R1T7932SH" completed keep alive response.
2024-05-23 11:01:25.560 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 202.1555ms
2024-05-23 11:03:21.597 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:03:21.721 +01:00 [DBG] Hosting starting
2024-05-23 11:03:21.765 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:03:21.787 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:03:21.800 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:03:21.809 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:03:21.814 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:03:21.817 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:03:21.819 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:03:21.826 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:03:21.830 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:03:21.836 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:03:21.839 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:03:22.040 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:03:22.042 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:03:22.044 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:03:22.045 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:03:22.046 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:03:22.047 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:03:22.048 +01:00 [INF] Hosting environment: Development
2024-05-23 11:03:22.049 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:03:22.050 +01:00 [DBG] Hosting started
2024-05-23 11:03:27.509 +01:00 [DBG] Connection id "0HN3R1UBMSQ96" received FIN.
2024-05-23 11:03:27.517 +01:00 [DBG] Connection id "0HN3R1UBMSQ96" accepted.
2024-05-23 11:03:27.519 +01:00 [DBG] Connection id "0HN3R1UBMSQ96" started.
2024-05-23 11:03:27.520 +01:00 [DBG] Connection id "0HN3R1UBMSQ97" accepted.
2024-05-23 11:03:27.521 +01:00 [DBG] Connection id "0HN3R1UBMSQ97" started.
2024-05-23 11:03:27.536 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:03:27.586 +01:00 [DBG] Connection id "0HN3R1UBMSQ96" stopped.
2024-05-23 11:03:27.588 +01:00 [DBG] Connection id "0HN3R1UBMSQ96" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:03:27.588 +01:00 [DBG] Connection 0HN3R1UBMSQ97 established using the following protocol: "Tls13"
2024-05-23 11:03:27.628 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:03:27.643 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:03:27.660 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:03:27.683 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:03:27.688 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:03:27.692 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:03:27.830 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'RQCa86366KGPDqf6iwD0oeFCCAGaG1FKvPFmpw_8tSg'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 11:03:27.838 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'RQCa86366KGPDqf6iwD0oeFCCAGaG1FKvPFmpw_8tSg'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-05-23 11:03:27.846 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:03:27.853 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 11:03:27.860 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:03:27.869 +01:00 [DBG] Connection id "0HN3R1UBMSQ97" completed keep alive response.
2024-05-23 11:03:27.875 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 252.7749ms
2024-05-23 11:04:48.574 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:04:48.680 +01:00 [DBG] Hosting starting
2024-05-23 11:04:48.711 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:04:48.719 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:04:48.727 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:04:48.735 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:04:48.739 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:04:48.741 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:04:48.745 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:04:48.750 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:04:48.754 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:04:48.760 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:04:48.762 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:04:48.934 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:04:48.936 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:04:48.937 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:04:48.938 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:04:48.939 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:04:48.940 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:04:48.941 +01:00 [INF] Hosting environment: Development
2024-05-23 11:04:48.943 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:04:48.944 +01:00 [DBG] Hosting started
2024-05-23 11:05:03.036 +01:00 [DBG] Connection id "0HN3R1V85TIQ7" received FIN.
2024-05-23 11:05:03.045 +01:00 [DBG] Connection id "0HN3R1V85TIQ7" accepted.
2024-05-23 11:05:03.048 +01:00 [DBG] Connection id "0HN3R1V85TIQ7" started.
2024-05-23 11:05:03.050 +01:00 [DBG] Connection id "0HN3R1V85TIQ8" accepted.
2024-05-23 11:05:03.052 +01:00 [DBG] Connection id "0HN3R1V85TIQ8" started.
2024-05-23 11:05:03.069 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:05:03.110 +01:00 [DBG] Connection 0HN3R1V85TIQ8 established using the following protocol: "Tls13"
2024-05-23 11:05:03.110 +01:00 [DBG] Connection id "0HN3R1V85TIQ7" stopped.
2024-05-23 11:05:03.113 +01:00 [DBG] Connection id "0HN3R1V85TIQ7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:05:03.142 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:05:03.157 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:05:03.173 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:05:03.193 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:05:03.197 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:05:03.219 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:05:03.329 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'RQCa86366KGPDqf6iwD0oeFCCAGaG1FKvPFmpw_8tSg'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 11:05:03.337 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'RQCa86366KGPDqf6iwD0oeFCCAGaG1FKvPFmpw_8tSg'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-05-23 11:05:03.342 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:05:03.345 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 11:05:03.350 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:05:03.366 +01:00 [DBG] Connection id "0HN3R1V85TIQ8" completed keep alive response.
2024-05-23 11:05:03.368 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 230.0965ms
2024-05-23 11:06:18.399 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:06:18.509 +01:00 [DBG] Hosting starting
2024-05-23 11:06:18.551 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:06:18.563 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:06:18.575 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:06:18.583 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:06:18.587 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:06:18.589 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:06:18.593 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:06:18.598 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:06:18.600 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:06:18.603 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:06:18.605 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:06:18.781 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:06:18.783 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:06:18.784 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:06:18.785 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:06:18.786 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:06:18.787 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:06:18.788 +01:00 [INF] Hosting environment: Development
2024-05-23 11:06:18.789 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:06:18.790 +01:00 [DBG] Hosting started
2024-05-23 11:06:24.512 +01:00 [DBG] Connection id "0HN3R200ETQVV" received FIN.
2024-05-23 11:06:24.517 +01:00 [DBG] Connection id "0HN3R200ETQVV" accepted.
2024-05-23 11:06:24.519 +01:00 [DBG] Connection id "0HN3R200ETQVV" started.
2024-05-23 11:06:24.521 +01:00 [DBG] Connection id "0HN3R200ETR00" accepted.
2024-05-23 11:06:24.524 +01:00 [DBG] Connection id "0HN3R200ETR00" started.
2024-05-23 11:06:24.536 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:06:24.575 +01:00 [DBG] Connection id "0HN3R200ETQVV" stopped.
2024-05-23 11:06:24.576 +01:00 [DBG] Connection 0HN3R200ETR00 established using the following protocol: "Tls13"
2024-05-23 11:06:24.577 +01:00 [DBG] Connection id "0HN3R200ETQVV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:06:24.610 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:06:24.625 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:06:24.638 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:06:24.657 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:06:24.660 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:06:24.662 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:06:24.778 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidIssuerException: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
   at Microsoft.IdentityModel.Tokens.Validators.ValidateIssuerAsync(String issuer, SecurityToken securityToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-05-23 11:06:24.781 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10205: Issuer validation failed. Issuer: 'https://localhost:7165'. Did not match: validationParameters.ValidIssuer: 'http://localhost:7165' or validationParameters.ValidIssuers: 'null' or validationParameters.ConfigurationManager.CurrentConfiguration.Issuer: 'Null'. For more details, see https://aka.ms/IdentityModel/issuer-validation. 
2024-05-23 11:06:24.784 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:06:24.787 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-23 11:06:24.792 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:06:24.801 +01:00 [DBG] Connection id "0HN3R200ETR00" completed keep alive response.
2024-05-23 11:06:24.803 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 401 0 null 199.0723ms
2024-05-23 11:11:05.219 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:11:05.373 +01:00 [DBG] Hosting starting
2024-05-23 11:11:05.417 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:11:05.427 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:11:05.448 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:11:05.458 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:11:05.464 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:11:05.466 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:11:05.469 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:11:05.476 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:11:05.478 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:11:05.481 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:11:05.483 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:11:05.654 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:11:05.656 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:11:05.656 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:11:05.657 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:11:05.659 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:11:05.660 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:11:05.661 +01:00 [INF] Hosting environment: Development
2024-05-23 11:11:05.662 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:11:05.663 +01:00 [DBG] Hosting started
2024-05-23 11:11:11.599 +01:00 [DBG] Connection id "0HN3R22M0Q22D" received FIN.
2024-05-23 11:11:11.605 +01:00 [DBG] Connection id "0HN3R22M0Q22D" accepted.
2024-05-23 11:11:11.608 +01:00 [DBG] Connection id "0HN3R22M0Q22D" started.
2024-05-23 11:11:11.610 +01:00 [DBG] Connection id "0HN3R22M0Q22E" accepted.
2024-05-23 11:11:11.612 +01:00 [DBG] Connection id "0HN3R22M0Q22E" started.
2024-05-23 11:11:11.645 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:11:11.687 +01:00 [DBG] Connection id "0HN3R22M0Q22D" stopped.
2024-05-23 11:11:11.688 +01:00 [DBG] Connection id "0HN3R22M0Q22D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:11:11.690 +01:00 [DBG] Connection 0HN3R22M0Q22E established using the following protocol: "Tls13"
2024-05-23 11:11:11.721 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:11:11.735 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:11:11.749 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:11:11.768 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:11:11.771 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:11:11.773 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:11:11.887 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:11:11.889 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:11:11.895 +01:00 [DBG] Authorization was successful.
2024-05-23 11:11:11.897 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:11:11.915 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:11:11.919 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:11:11.920 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:11:11.921 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:11:11.923 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:11:11.925 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:11:11.927 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:11:12.066 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:11:12.085 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:11:12.098 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-23 11:11:12.101 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-05-23 11:11:12.102 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-05-23 11:11:12.104 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:11:12.105 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:11:12.106 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-23 11:11:12.109 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-23 11:11:12.111 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:11:12.112 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-23 11:11:12.113 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:11:12.114 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:11:12.115 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:11:12.116 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:11:12.117 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:11:12.118 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:11:12.119 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:11:12.121 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:11:12.122 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:11:12.123 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:11:12.125 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:11:12.127 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:11:12.128 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:11:12.129 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:11:12.130 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:11:12.131 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:11:12.132 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:11:12.133 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:11:12.134 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:11:12.679 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:11:12.698 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-05-23 11:11:12.829 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:11:12.854 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:11:12.864 +01:00 [DBG] Created DbConnection. (9ms).
2024-05-23 11:11:12.868 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:11:12.880 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:11:12.884 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:11:12.889 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:11:12.893 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-05-23 11:11:12.899 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:11:12.918 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:11:12.928 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:11:12.936 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 10ms reading results.
2024-05-23 11:11:12.945 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:11:12.949 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (4ms).
2024-05-23 11:11:12.956 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-05-23 11:11:12.993 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:11:13.000 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:11:13.002 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:11:13.003 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:11:13.004 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:11:13.006 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:11:13.009 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:11:13.014 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:11:13.029 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:11:13.042 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:11:13.045 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:11:13.046 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:11:13.047 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 31ms reading results.
2024-05-23 11:11:13.048 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:11:13.049 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:11:13.076 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:11:13.081 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:11:13.081 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:11:13.082 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:11:13.084 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:11:13.085 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:11:13.172 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1244.1984ms
2024-05-23 11:11:13.176 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:11:13.178 +01:00 [DBG] Connection id "0HN3R22M0Q22E" completed keep alive response.
2024-05-23 11:11:13.181 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:11:13.185 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:11:13.187 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:11:13.190 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 200 205 application/json; charset=utf-8 1472.4677ms
2024-05-23 11:12:40.388 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:12:40.394 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:12:40.403 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:12:40.405 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:12:40.407 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:12:40.412 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:12:40.414 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:12:40.418 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-23 11:12:40.422 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:12:40.424 +01:00 [DBG] Connection id "0HN3R22M0Q22E" completed keep alive response.
2024-05-23 11:12:40.425 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 37.9873ms
2024-05-23 11:13:40.004 +01:00 [DBG] Config reload token fired. Checking for changes...
2024-05-23 11:13:40.260 +01:00 [DBG] Config reload token fired. Checking for changes...
2024-05-23 11:13:56.463 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:13:56.466 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:13:56.467 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:13:56.468 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:13:56.468 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:13:56.470 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:13:56.472 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:13:56.472 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:13:56.474 +01:00 [DBG] Authorization was successful.
2024-05-23 11:13:56.475 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:13:56.483 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:13:56.486 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:13:56.487 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:13:56.488 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:13:56.490 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:13:56.492 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:13:56.493 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:13:56.496 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:13:56.497 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:13:56.498 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:13:56.500 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:13:56.501 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:13:56.502 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:13:56.503 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:13:56.516 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:13:56.521 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-23 11:13:56.535 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:13:56.546 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:13:56.548 +01:00 [DBG] Created DbConnection. (1ms).
2024-05-23 11:13:56.548 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:13:56.549 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:13:56.550 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:13:56.551 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:13:56.552 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:13:56.553 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:13:56.557 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:13:56.560 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:13:56.561 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:13:56.562 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:13:56.563 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:13:56.566 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:13:56.567 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:13:56.567 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 74.4295ms
2024-05-23 11:13:56.569 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:13:56.570 +01:00 [DBG] Connection id "0HN3R22M0Q22E" completed keep alive response.
2024-05-23 11:13:56.570 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:13:56.571 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:13:56.572 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-05-23 11:13:56.573 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 110.1213ms
2024-05-23 11:14:21.034 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:14:21.169 +01:00 [DBG] Hosting starting
2024-05-23 11:14:21.198 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:14:21.206 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:14:21.219 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:14:21.232 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:14:21.236 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:14:21.238 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:14:21.241 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:14:21.250 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:14:21.253 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:14:21.257 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:14:21.261 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:14:21.464 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:14:21.466 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:14:21.467 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:14:21.468 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:14:21.469 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:14:21.470 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:14:21.470 +01:00 [INF] Hosting environment: Development
2024-05-23 11:14:21.471 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:14:21.472 +01:00 [DBG] Hosting started
2024-05-23 11:14:36.577 +01:00 [DBG] Connection id "0HN3R24J3KA3B" received FIN.
2024-05-23 11:14:36.582 +01:00 [DBG] Connection id "0HN3R24J3KA3B" accepted.
2024-05-23 11:14:36.583 +01:00 [DBG] Connection id "0HN3R24J3KA3B" started.
2024-05-23 11:14:36.585 +01:00 [DBG] Connection id "0HN3R24J3KA3C" accepted.
2024-05-23 11:14:36.586 +01:00 [DBG] Connection id "0HN3R24J3KA3C" started.
2024-05-23 11:14:36.599 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:14:36.637 +01:00 [DBG] Connection id "0HN3R24J3KA3B" stopped.
2024-05-23 11:14:36.638 +01:00 [DBG] Connection id "0HN3R24J3KA3B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:14:36.638 +01:00 [DBG] Connection 0HN3R24J3KA3C established using the following protocol: "Tls13"
2024-05-23 11:14:36.672 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:14:36.687 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:14:36.703 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:14:36.722 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:14:36.727 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:14:36.729 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:14:36.846 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:14:36.848 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:14:36.853 +01:00 [DBG] Authorization was successful.
2024-05-23 11:14:36.855 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:14:36.874 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:14:36.878 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:14:36.879 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:14:36.880 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:14:36.882 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:14:36.883 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:14:36.885 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:14:36.992 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:14:37.007 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:14:37.019 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:14:37.021 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:14:37.024 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:14:37.025 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:14:37.026 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:14:37.029 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:14:37.555 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:14:37.593 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-23 11:14:37.730 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:14:37.759 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:14:37.768 +01:00 [DBG] Created DbConnection. (8ms).
2024-05-23 11:14:37.772 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:14:37.785 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:14:37.789 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:14:37.795 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-05-23 11:14:37.800 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-05-23 11:14:37.807 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:14:37.827 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:14:37.835 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:14:37.841 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-23 11:14:37.845 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:14:37.849 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-23 11:14:37.852 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:14:37.854 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:14:37.857 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 970.4453ms
2024-05-23 11:14:37.860 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:14:37.863 +01:00 [DBG] Connection id "0HN3R24J3KA3C" completed keep alive response.
2024-05-23 11:14:37.866 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:14:37.869 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:14:37.871 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:14:37.876 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 1206.4855ms
2024-05-23 11:17:57.764 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:17:57.879 +01:00 [DBG] Hosting starting
2024-05-23 11:17:57.913 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:17:57.922 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:17:57.937 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:17:57.950 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:17:57.958 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:17:57.963 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:17:57.967 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:17:57.975 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:17:57.977 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:17:57.979 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:17:57.981 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:17:58.142 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:17:58.144 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:17:58.145 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:17:58.145 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:17:58.146 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:17:58.147 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:17:58.148 +01:00 [INF] Hosting environment: Development
2024-05-23 11:17:58.149 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:17:58.149 +01:00 [DBG] Hosting started
2024-05-23 11:18:05.097 +01:00 [DBG] Connection id "0HN3R26H87JQH" received FIN.
2024-05-23 11:18:05.103 +01:00 [DBG] Connection id "0HN3R26H87JQH" accepted.
2024-05-23 11:18:05.106 +01:00 [DBG] Connection id "0HN3R26H87JQH" started.
2024-05-23 11:18:05.108 +01:00 [DBG] Connection id "0HN3R26H87JQI" accepted.
2024-05-23 11:18:05.109 +01:00 [DBG] Connection id "0HN3R26H87JQI" started.
2024-05-23 11:18:05.120 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:18:05.158 +01:00 [DBG] Connection id "0HN3R26H87JQH" stopped.
2024-05-23 11:18:05.160 +01:00 [DBG] Connection id "0HN3R26H87JQH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:18:05.162 +01:00 [DBG] Connection 0HN3R26H87JQI established using the following protocol: "Tls13"
2024-05-23 11:18:05.194 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:18:05.210 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:18:05.224 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:18:05.242 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:18:05.246 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:18:05.248 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:18:05.361 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:18:05.364 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:18:05.368 +01:00 [DBG] Authorization was successful.
2024-05-23 11:18:05.370 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:18:05.390 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:18:05.394 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:18:05.395 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:18:05.396 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:18:05.398 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:18:05.399 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:18:05.401 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:18:05.501 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:18:05.517 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:18:05.529 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:18:05.532 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:18:05.534 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:18:05.535 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:18:05.536 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:18:05.539 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:18:06.047 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:18:06.081 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-23 11:18:06.203 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:18:06.232 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:18:06.242 +01:00 [DBG] Created DbConnection. (7ms).
2024-05-23 11:18:06.245 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:18:06.256 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:18:06.261 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:18:06.265 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:18:06.270 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-05-23 11:18:06.279 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:18:06.299 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:18:06.309 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:18:06.314 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 9ms reading results.
2024-05-23 11:18:06.319 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:18:06.322 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-23 11:18:06.326 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:18:06.328 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:18:06.331 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 928.5548ms
2024-05-23 11:18:06.332 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:18:06.335 +01:00 [DBG] Connection id "0HN3R26H87JQI" completed keep alive response.
2024-05-23 11:18:06.337 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:18:06.342 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:18:06.343 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:18:06.345 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 1155.087ms
2024-05-23 11:21:24.090 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:21:24.214 +01:00 [DBG] Hosting starting
2024-05-23 11:21:24.255 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:21:24.274 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:21:24.289 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:21:24.299 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:21:24.302 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:21:24.304 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:21:24.305 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:21:24.310 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:21:24.313 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:21:24.315 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:21:24.317 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:21:24.488 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:21:24.489 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:21:24.490 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:21:24.491 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:21:24.491 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:21:24.492 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:21:24.494 +01:00 [INF] Hosting environment: Development
2024-05-23 11:21:24.495 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:21:24.496 +01:00 [DBG] Hosting started
2024-05-23 11:21:54.171 +01:00 [DBG] Connection id "0HN3R28LGRDF3" received FIN.
2024-05-23 11:21:54.177 +01:00 [DBG] Connection id "0HN3R28LGRDF3" accepted.
2024-05-23 11:21:54.180 +01:00 [DBG] Connection id "0HN3R28LGRDF3" started.
2024-05-23 11:21:54.185 +01:00 [DBG] Connection id "0HN3R28LGRDF4" accepted.
2024-05-23 11:21:54.186 +01:00 [DBG] Connection id "0HN3R28LGRDF4" started.
2024-05-23 11:21:54.199 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:21:54.286 +01:00 [DBG] Connection 0HN3R28LGRDF4 established using the following protocol: "Tls13"
2024-05-23 11:21:54.286 +01:00 [DBG] Connection id "0HN3R28LGRDF3" stopped.
2024-05-23 11:21:54.289 +01:00 [DBG] Connection id "0HN3R28LGRDF3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:21:54.319 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:21:54.333 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:21:54.352 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:21:54.373 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:21:54.377 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:21:54.400 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:21:54.522 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:21:54.525 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:21:54.531 +01:00 [DBG] Authorization was successful.
2024-05-23 11:21:54.533 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:21:54.555 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:21:54.576 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:21:54.588 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:21:54.590 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:21:54.593 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:21:54.595 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:21:54.603 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:21:54.724 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:21:54.751 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:21:54.774 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:21:54.779 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:21:54.796 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:21:54.808 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:21:54.810 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:21:54.827 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:21:55.370 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:21:55.396 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-23 11:21:55.537 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:21:55.569 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:21:55.579 +01:00 [DBG] Created DbConnection. (8ms).
2024-05-23 11:21:55.583 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:21:55.594 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:21:55.609 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:21:55.615 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-05-23 11:21:55.626 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-23 11:21:55.634 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:21:55.673 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:21:55.689 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:21:55.697 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 8ms reading results.
2024-05-23 11:21:55.702 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:21:55.717 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-23 11:21:55.733 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:21:55.737 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:21:55.752 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1147.1396ms
2024-05-23 11:21:55.773 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:21:55.780 +01:00 [DBG] Connection id "0HN3R28LGRDF4" completed keep alive response.
2024-05-23 11:21:55.795 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:21:55.811 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:21:55.813 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:21:55.826 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 1510.9799ms
2024-05-23 11:28:10.483 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:28:10.620 +01:00 [DBG] Hosting starting
2024-05-23 11:28:10.660 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:28:10.670 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:28:10.678 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:28:10.686 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:28:10.691 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:28:10.693 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:28:10.695 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:28:10.699 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:28:10.701 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:28:10.704 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:28:10.706 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:28:10.880 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:28:10.882 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:28:10.882 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:28:10.883 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:28:10.884 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:28:10.885 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:28:10.885 +01:00 [INF] Hosting environment: Development
2024-05-23 11:28:10.887 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:28:10.888 +01:00 [DBG] Hosting started
2024-05-23 11:28:20.226 +01:00 [DBG] Connection id "0HN3R2C8IHRQT" received FIN.
2024-05-23 11:28:20.231 +01:00 [DBG] Connection id "0HN3R2C8IHRQT" accepted.
2024-05-23 11:28:20.233 +01:00 [DBG] Connection id "0HN3R2C8IHRQT" started.
2024-05-23 11:28:20.235 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" accepted.
2024-05-23 11:28:20.237 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" started.
2024-05-23 11:28:20.253 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:28:20.290 +01:00 [DBG] Connection id "0HN3R2C8IHRQT" stopped.
2024-05-23 11:28:20.292 +01:00 [DBG] Connection id "0HN3R2C8IHRQT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:28:20.295 +01:00 [DBG] Connection 0HN3R2C8IHRQU established using the following protocol: "Tls13"
2024-05-23 11:28:20.326 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:28:20.341 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:28:20.354 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:28:20.372 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:28:20.376 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:28:20.378 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:28:20.488 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:28:20.491 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:28:20.495 +01:00 [DBG] Authorization was successful.
2024-05-23 11:28:20.496 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:28:20.513 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:28:20.517 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:28:20.518 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:28:20.520 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:28:20.522 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:28:20.523 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:28:20.526 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:28:20.621 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:28:20.635 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:28:20.647 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-23 11:28:20.649 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-05-23 11:28:20.652 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-05-23 11:28:20.654 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:28:20.655 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:28:20.657 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-23 11:28:20.659 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-23 11:28:20.660 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:28:20.661 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-23 11:28:20.662 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:28:20.664 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:28:20.665 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:28:20.666 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:28:20.667 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:28:20.668 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:28:20.671 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:28:20.672 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:28:20.674 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:28:20.675 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:28:20.677 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:28:20.679 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:28:20.680 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:28:20.682 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:28:20.683 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:28:20.684 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:28:20.686 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:28:20.687 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:28:20.688 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:28:21.207 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:28:21.227 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-05-23 11:28:21.374 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:28:21.396 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:28:21.405 +01:00 [DBG] Created DbConnection. (7ms).
2024-05-23 11:28:21.409 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:28:21.419 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:21.424 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:28:21.429 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:28:21.432 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-05-23 11:28:21.437 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:28:21.453 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:28:21.462 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:21.467 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-23 11:28:21.473 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:21.477 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-23 11:28:21.483 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-05-23 11:28:21.518 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:28:21.527 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:28:21.529 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:21.530 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:28:21.531 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:28:21.534 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:28:21.537 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:28:21.542 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:28:21.560 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:28:21.574 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:28:21.576 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:28:21.577 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:21.578 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 32ms reading results.
2024-05-23 11:28:21.580 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:21.581 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:28:21.607 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:28:21.611 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:28:21.613 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:28:21.613 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:28:21.615 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:28:21.616 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:28:21.698 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1171.0512ms
2024-05-23 11:28:21.701 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:28:21.702 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:28:21.706 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:28:21.711 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:28:21.714 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:28:21.716 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 200 205 application/json; charset=utf-8 1392.9622ms
2024-05-23 11:28:31.581 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:28:31.587 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:28:31.589 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:28:31.591 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:28:31.592 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:28:31.595 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:28:31.596 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:28:31.598 +01:00 [DBG] Authorization was successful.
2024-05-23 11:28:31.599 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:28:31.604 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:28:31.607 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:28:31.608 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:28:31.609 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:28:31.610 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:28:31.612 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:28:31.613 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:28:31.615 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:28:31.616 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:28:31.617 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:28:31.620 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:28:31.621 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:28:31.622 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:28:31.624 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:28:31.637 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:28:31.641 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2024-05-23 11:28:31.655 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:28:31.664 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:28:31.665 +01:00 [DBG] Created DbConnection. (1ms).
2024-05-23 11:28:31.667 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:28:31.668 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:31.670 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:28:31.670 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:28:31.672 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:28:31.673 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:28:31.675 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:28:31.677 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:31.679 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:28:31.680 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:28:31.682 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:28:31.684 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:28:31.688 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:28:31.689 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 76.4156ms
2024-05-23 11:28:31.691 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:28:31.692 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:28:31.693 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:28:31.694 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:28:31.695 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-05-23 11:28:31.696 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 115.1501ms
2024-05-23 11:29:08.819 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1?includePointsOfInterest=true - null null
2024-05-23 11:29:08.850 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:29:08.852 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-05-23 11:29:08.855 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-05-23 11:29:08.858 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:29:08.861 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:29:08.862 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:29:08.863 +01:00 [DBG] Authorization was successful.
2024-05-23 11:29:08.864 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:29:08.867 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:29:08.871 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:29:08.872 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:29:08.873 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:29:08.874 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:29:08.876 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:29:08.877 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:29:08.880 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:29:08.883 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-05-23 11:29:08.886 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-05-23 11:29:08.888 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-05-23 11:29:08.889 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-05-23 11:29:08.890 +01:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-05-23 11:29:08.891 +01:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-05-23 11:29:08.892 +01:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-05-23 11:29:08.893 +01:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-05-23 11:29:08.895 +01:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:29:08.896 +01:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:29:08.897 +01:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-05-23 11:29:08.898 +01:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:29:08.944 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:29:08.950 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-05-23 11:29:08.959 +01:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-05-23 11:29:09.006 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:29:09.011 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:29:09.012 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-23 11:29:09.012 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:09.013 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:09.014 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:29:09.015 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:29:09.016 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:29:09.019 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-05-23 11:29:09.021 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-05-23 11:29:09.023 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:29:09.039 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:29:09.044 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:09.045 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 21ms reading results.
2024-05-23 11:29:09.046 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:09.048 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:09.053 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:29:09.056 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:29:09.057 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:29:09.057 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:29:09.058 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:29:09.059 +01:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2024-05-23 11:29:09.064 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 186.7457ms
2024-05-23 11:29:09.066 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:29:09.068 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:29:09.070 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:29:09.073 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:09.074 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:09.076 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1?includePointsOfInterest=true - 200 233 application/json; charset=utf-8 256.7765ms
2024-05-23 11:29:23.549 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/1 - null null
2024-05-23 11:29:23.554 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:29:23.555 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-05-23 11:29:23.557 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-05-23 11:29:23.560 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:29:23.561 +01:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-05-23 11:29:23.562 +01:00 [DBG] Policy authentication schemes  did not succeed
2024-05-23 11:29:23.563 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-23 11:29:23.567 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-05-23 11:29:23.568 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:29:23.569 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/1 - 401 0 null 20.4244ms
2024-05-23 11:29:28.608 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/1 - null null
2024-05-23 11:29:28.611 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:29:28.612 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2024-05-23 11:29:28.613 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2024-05-23 11:29:28.615 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:29:28.617 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:29:28.618 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:29:28.620 +01:00 [DBG] Authorization was successful.
2024-05-23 11:29:28.621 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:29:28.625 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:29:28.626 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:29:28.627 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:29:28.629 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:29:28.630 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:29:28.631 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:29:28.633 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:29:28.635 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:29:28.636 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:29:28.637 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:29:28.638 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:29:28.639 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:29:28.640 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:29:28.641 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:29:28.642 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-05-23 11:29:28.643 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-05-23 11:29:28.644 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:29:28.645 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:29:28.646 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-05-23 11:29:28.647 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:29:28.651 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:29:28.653 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-23 11:29:28.656 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:29:28.658 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:29:28.658 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-23 11:29:28.659 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:28.660 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:28.661 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:29:28.662 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:29:28.663 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:29:28.664 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:29:28.666 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:29:28.669 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:28.671 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:29:28.672 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:28.673 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:28.676 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __CityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-05-23 11:29:28.679 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__CityId_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:29:28.682 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:28.684 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:28.686 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:29:28.686 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:29:28.687 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:29:28.688 +01:00 [DBG] Executing DbCommand [Parameters=[@__CityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__CityId_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-05-23 11:29:28.690 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__CityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__CityId_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-05-23 11:29:28.692 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:28.693 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:29:28.694 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:28.695 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:28.697 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:29:28.699 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:29:28.701 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-05-23 11:29:28.704 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-05-23 11:29:28.705 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-05-23 11:29:28.715 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 81.9729ms
2024-05-23 11:29:28.718 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:29:28.720 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:29:28.721 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:29:28.721 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:28.722 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-05-23 11:29:28.723 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/1 - 404 162 application/problem+json; charset=utf-8 115.8026ms
2024-05-23 11:29:33.806 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/ - null null
2024-05-23 11:29:33.808 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:29:33.809 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/'
2024-05-23 11:29:33.810 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest/'
2024-05-23 11:29:33.811 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:29:33.812 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:29:33.813 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:29:33.814 +01:00 [DBG] Authorization was successful.
2024-05-23 11:29:33.814 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:29:33.815 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:29:33.819 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:29:33.820 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:29:33.822 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:29:33.823 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:29:33.825 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:29:33.826 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:29:33.827 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:29:33.828 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:29:33.829 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:29:33.830 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:29:33.831 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:29:33.833 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:29:33.835 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:29:33.837 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:29:33.840 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:29:33.841 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-23 11:29:33.842 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:33.844 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:33.845 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:29:33.846 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:29:33.847 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:29:33.848 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:29:33.851 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:29:33.854 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:33.855 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:29:33.856 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:33.857 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:33.858 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:29:33.859 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:29:33.860 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 34.0086ms
2024-05-23 11:29:33.861 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:29:33.862 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:29:33.863 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:29:33.864 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:33.865 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:33.868 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/ - 403 0 null 61.848ms
2024-05-23 11:29:47.864 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities?name=New%20York%20City - null null
2024-05-23 11:29:47.867 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:29:47.868 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:29:47.870 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:29:47.872 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:29:47.873 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:29:47.874 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:29:47.875 +01:00 [DBG] Authorization was successful.
2024-05-23 11:29:47.876 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:29:47.877 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:29:47.880 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:29:47.882 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:29:47.884 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:29:47.887 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:29:47.888 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:29:47.890 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:29:47.891 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:29:47.893 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-23 11:29:47.895 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2024-05-23 11:29:47.896 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:29:47.897 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:29:47.898 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-23 11:29:47.899 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-23 11:29:47.900 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:29:47.901 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-23 11:29:47.903 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:29:47.904 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:29:47.905 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:29:47.906 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:29:47.907 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:29:47.908 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:29:47.909 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:29:47.910 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:29:47.911 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:29:47.912 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:29:47.913 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:29:47.914 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:29:47.915 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:29:47.916 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:29:47.917 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:29:47.919 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:29:47.920 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:29:47.920 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:29:47.921 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:29:47.923 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:29:47.925 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .Count()'
2024-05-23 11:29:47.927 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c
            WHERE c.Name == @__name_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:29:47.929 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:29:47.930 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-23 11:29:47.930 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:47.931 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:47.933 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:29:47.934 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:29:47.935 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:29:47.936 +01:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
2024-05-23 11:29:47.938 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
2024-05-23 11:29:47.940 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:47.941 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:29:47.942 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:47.943 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:47.944 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .OrderBy(c => c.Name)
    .Skip(__p_1)
    .Take(__p_2)'
2024-05-23 11:29:47.947 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE c.Name == @__name_0
        ORDER BY c.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:29:47.950 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:47.951 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:47.952 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:29:47.953 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:29:47.954 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:29:47.955 +01:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 13), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
LIMIT @__p_2 OFFSET @__p_1
2024-05-23 11:29:47.957 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 13), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
LIMIT @__p_2 OFFSET @__p_1
2024-05-23 11:29:47.959 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:29:47.960 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:47.961 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2024-05-23 11:29:47.962 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:29:47.963 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:29:47.965 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:29:47.968 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:29:47.968 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:29:47.969 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:29:47.970 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:29:47.971 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:29:47.973 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 82.7943ms
2024-05-23 11:29:47.974 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:29:47.975 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:29:47.976 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:29:47.977 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:29:47.978 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-05-23 11:29:47.979 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities?name=New%20York%20City - 200 76 application/json; charset=utf-8 114.6595ms
2024-05-23 11:30:38.753 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:30:38.755 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:30:38.756 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:30:38.757 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:30:38.759 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:30:38.760 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:30:38.760 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:30:38.761 +01:00 [DBG] Authorization was successful.
2024-05-23 11:30:38.762 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:30:38.764 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:30:38.767 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:30:38.769 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:30:38.771 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:30:38.772 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:30:38.774 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:30:38.775 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:30:38.776 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:30:38.777 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:30:38.778 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:30:38.780 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:30:38.781 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:30:38.782 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:30:38.783 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:30:38.785 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:30:38.790 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:30:38.790 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-23 11:30:38.791 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:30:38.792 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:30:38.793 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:30:38.794 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:30:38.795 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:30:38.796 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:30:38.798 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:30:38.800 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:30:38.801 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 1ms reading results.
2024-05-23 11:30:38.803 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:30:38.804 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:30:38.805 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:30:38.806 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:30:38.806 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 31.5428ms
2024-05-23 11:30:38.807 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:30:38.808 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:30:38.809 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:30:38.810 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:30:38.811 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (0ms).
2024-05-23 11:30:38.812 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 88.9949ms
2024-05-23 11:30:51.994 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:30:51.998 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:30:52.000 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:30:52.002 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:30:52.023 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:30:52.025 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:30:52.026 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:30:52.028 +01:00 [DBG] Authorization was successful.
2024-05-23 11:30:52.030 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:30:52.048 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:30:52.061 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:30:52.063 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:30:52.065 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:30:52.076 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:30:52.090 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:30:52.091 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:30:52.093 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:30:52.095 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:30:52.097 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:30:52.109 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:30:52.111 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:30:52.123 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:30:52.124 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:30:52.126 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:30:52.128 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:30:52.135 +01:00 [DBG] Created DbConnection. (7ms).
2024-05-23 11:30:52.137 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:30:52.151 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:30:52.160 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:30:52.166 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-05-23 11:30:52.185 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2024-05-23 11:30:52.187 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:30:52.235 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0 AND "c"."Name" = @__cityName_1)
2024-05-23 11:30:52.259 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:30:52.277 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 17ms reading results.
2024-05-23 11:30:52.301 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:30:52.313 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (11ms).
2024-05-23 11:30:52.315 +01:00 [INF] Executing ForbidResult with authentication schemes ([]).
2024-05-23 11:30:52.328 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:30:52.342 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 251.1695ms
2024-05-23 11:30:52.344 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:30:52.347 +01:00 [DBG] Connection id "0HN3R2C8IHRQU" completed keep alive response.
2024-05-23 11:30:52.365 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:30:52.377 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:30:52.385 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (7ms).
2024-05-23 11:30:52.387 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 393.19ms
2024-05-23 11:35:20.560 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:35:20.683 +01:00 [DBG] Hosting starting
2024-05-23 11:35:20.711 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:35:20.718 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:35:20.726 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:35:20.735 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:35:20.739 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:35:20.741 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:35:20.744 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:35:20.750 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:35:20.753 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:35:20.761 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:35:20.773 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:35:20.942 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:35:20.944 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:35:20.945 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:35:20.946 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:35:20.947 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:35:20.948 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:35:20.949 +01:00 [INF] Hosting environment: Development
2024-05-23 11:35:20.950 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:35:20.951 +01:00 [DBG] Hosting started
2024-05-23 11:35:23.367 +01:00 [DBG] Connection id "0HN3R2G6LUDH9" received FIN.
2024-05-23 11:35:23.372 +01:00 [DBG] Connection id "0HN3R2G6LUDH9" accepted.
2024-05-23 11:35:23.374 +01:00 [DBG] Connection id "0HN3R2G6LUDH9" started.
2024-05-23 11:35:23.376 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" accepted.
2024-05-23 11:35:23.378 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" started.
2024-05-23 11:35:23.390 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:35:23.432 +01:00 [DBG] Connection 0HN3R2G6LUDHA established using the following protocol: "Tls13"
2024-05-23 11:35:23.435 +01:00 [DBG] Connection id "0HN3R2G6LUDH9" stopped.
2024-05-23 11:35:23.440 +01:00 [DBG] Connection id "0HN3R2G6LUDH9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:35:23.466 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:35:23.482 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:35:23.498 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:35:23.522 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:35:23.526 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:35:23.540 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:35:23.673 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:35:23.676 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:35:23.683 +01:00 [DBG] Authorization was successful.
2024-05-23 11:35:23.687 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:35:23.714 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:35:23.727 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:35:23.734 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:35:23.736 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:35:23.757 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:35:23.764 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:35:23.792 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:35:23.915 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:35:23.930 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:35:23.947 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:35:23.952 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:35:23.954 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:23.966 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:23.975 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:35:23.981 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:24.493 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:35:24.522 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-23 11:35:24.670 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:35:24.706 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:35:24.716 +01:00 [DBG] Created DbConnection. (10ms).
2024-05-23 11:35:24.720 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:24.732 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:24.737 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:24.752 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2024-05-23 11:35:24.763 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (26ms).
2024-05-23 11:35:24.770 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:35:24.810 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:35:24.846 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:24.858 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2024-05-23 11:35:24.872 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:24.881 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (9ms).
2024-05-23 11:35:24.889 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-23 11:35:24.922 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:35:24.928 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:24.931 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:24.939 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:24.942 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:35:24.943 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-05-23 11:35:24.945 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-23 11:35:24.959 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-23 11:35:24.990 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:25.005 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:25.008 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 31ms reading results.
2024-05-23 11:35:25.023 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:25.027 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-23 11:35:25.053 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:35:25.075 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:35:25.090 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:35:25.103 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:35:25.107 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:35:25.122 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:35:25.217 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 1424.3491ms
2024-05-23 11:35:25.220 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:35:25.221 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" completed keep alive response.
2024-05-23 11:35:25.224 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:35:25.228 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:25.232 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-23 11:35:25.235 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 200 110 application/json; charset=utf-8 1773.5063ms
2024-05-23 11:35:30.063 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:35:30.067 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:35:30.069 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:35:30.070 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:35:30.071 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:35:30.074 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:35:30.076 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:35:30.079 +01:00 [DBG] Authorization was successful.
2024-05-23 11:35:30.087 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:35:30.094 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:35:30.107 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:35:30.124 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:35:30.126 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:35:30.142 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:35:30.158 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:35:30.172 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:35:30.175 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:35:30.189 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-23 11:35:30.190 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-05-23 11:35:30.205 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-05-23 11:35:30.207 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:35:30.221 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:35:30.222 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-23 11:35:30.238 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-23 11:35:30.239 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:35:30.254 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-23 11:35:30.255 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:35:30.270 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:35:30.287 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:35:30.288 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:35:30.301 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:35:30.302 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:35:30.303 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:35:30.305 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:35:30.306 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:35:30.314 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:35:30.327 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:35:30.345 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:35:30.360 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:35:30.376 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:35:30.392 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:35:30.407 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:35:30.409 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:35:30.423 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:35:30.424 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:35:30.452 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:35:30.457 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-05-23 11:35:30.506 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:35:30.540 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:35:30.542 +01:00 [DBG] Created DbConnection. (1ms).
2024-05-23 11:35:30.543 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:30.551 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:30.559 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:30.565 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-05-23 11:35:30.567 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-05-23 11:35:30.578 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:35:30.593 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:35:30.622 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:30.626 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 4ms reading results.
2024-05-23 11:35:30.642 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:30.658 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-23 11:35:30.675 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-05-23 11:35:30.695 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:35:30.731 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:30.737 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:30.752 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:30.754 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:35:30.767 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2024-05-23 11:35:30.769 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:35:30.792 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:35:30.813 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:30.821 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:30.823 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:30.828 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:30.841 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 31ms reading results.
2024-05-23 11:35:30.848 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:30.858 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (10ms).
2024-05-23 11:35:30.883 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:35:30.906 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:35:30.909 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:35:30.922 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:35:30.926 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:35:30.941 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:35:30.958 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 785.8003ms
2024-05-23 11:35:30.961 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:35:30.972 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" completed keep alive response.
2024-05-23 11:35:30.973 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:35:30.987 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:30.989 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:35:31.005 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 200 205 application/json; charset=utf-8 941.8953ms
2024-05-23 11:35:34.088 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1?includePointsOfInterest=true - null null
2024-05-23 11:35:34.091 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:35:34.092 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-05-23 11:35:34.094 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-05-23 11:35:34.097 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:35:34.100 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:35:34.100 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:35:34.102 +01:00 [DBG] Authorization was successful.
2024-05-23 11:35:34.103 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:35:34.106 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:35:34.124 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:35:34.139 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:35:34.141 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:35:34.170 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:35:34.172 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:35:34.187 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:35:34.204 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:35:34.208 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-05-23 11:35:34.217 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-05-23 11:35:34.218 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-05-23 11:35:34.228 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-05-23 11:35:34.234 +01:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-05-23 11:35:34.236 +01:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-05-23 11:35:34.249 +01:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-05-23 11:35:34.251 +01:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-05-23 11:35:34.266 +01:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:35:34.268 +01:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:35:34.275 +01:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-05-23 11:35:34.281 +01:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:35:34.331 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:35:34.337 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-05-23 11:35:34.347 +01:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-05-23 11:35:34.392 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:35:34.402 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:35:34.403 +01:00 [DBG] Created DbConnection. (1ms).
2024-05-23 11:35:34.415 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:34.416 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:34.418 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:34.419 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:35:34.420 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-23 11:35:34.422 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-05-23 11:35:34.425 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-05-23 11:35:34.431 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:34.444 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:34.448 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:34.451 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 19ms reading results.
2024-05-23 11:35:34.453 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:34.454 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:35:34.458 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:35:34.466 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:35:34.467 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:35:34.473 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:35:34.486 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:35:34.501 +01:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2024-05-23 11:35:34.505 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 318.674ms
2024-05-23 11:35:34.513 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:35:34.517 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" completed keep alive response.
2024-05-23 11:35:34.519 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:35:34.528 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:34.534 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (5ms).
2024-05-23 11:35:34.536 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1?includePointsOfInterest=true - 200 233 application/json; charset=utf-8 447.8894ms
2024-05-23 11:35:37.740 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:35:37.744 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:35:37.745 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:35:37.747 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:35:37.749 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:35:37.751 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:35:37.751 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:35:37.756 +01:00 [DBG] Authorization was successful.
2024-05-23 11:35:37.757 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:35:37.771 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:35:37.802 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:35:37.817 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:35:37.818 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:35:37.843 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:35:37.851 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:35:37.865 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:35:37.875 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:35:37.889 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:35:37.892 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:35:37.895 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:37.908 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:37.909 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:35:37.910 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:37.917 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:35:37.931 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:35:37.933 +01:00 [DBG] Created DbConnection. (2ms).
2024-05-23 11:35:37.934 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:37.948 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:37.958 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:37.964 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-05-23 11:35:37.976 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-05-23 11:35:37.977 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:35:38.008 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:35:38.038 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:38.040 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2024-05-23 11:35:38.042 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:38.051 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (9ms).
2024-05-23 11:35:38.060 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:38.063 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:38.065 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:38.066 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:35:38.067 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-23 11:35:38.069 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-23 11:35:38.071 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-23 11:35:38.087 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:38.091 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:38.104 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 17ms reading results.
2024-05-23 11:35:38.108 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:38.124 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-23 11:35:38.138 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:35:38.141 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:35:38.142 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:35:38.143 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:35:38.152 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:35:38.159 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:35:38.168 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 303.1921ms
2024-05-23 11:35:38.184 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:35:38.200 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" completed keep alive response.
2024-05-23 11:35:38.213 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:35:38.223 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:38.227 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (3ms).
2024-05-23 11:35:38.241 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 200 110 application/json; charset=utf-8 500.9565ms
2024-05-23 11:35:41.991 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/2 - null null
2024-05-23 11:35:41.995 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:35:41.997 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2024-05-23 11:35:41.999 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2024-05-23 11:35:42.002 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:35:42.004 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:35:42.009 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:35:42.010 +01:00 [DBG] Authorization was successful.
2024-05-23 11:35:42.023 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:35:42.039 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:35:42.056 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:35:42.072 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:35:42.073 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:35:42.088 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:35:42.104 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:35:42.120 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:35:42.136 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:35:42.149 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:35:42.150 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:35:42.163 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:42.165 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:42.174 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:35:42.178 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:35:42.189 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-05-23 11:35:42.192 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-05-23 11:35:42.208 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:35:42.210 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:35:42.225 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-05-23 11:35:42.226 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:35:42.242 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:35:42.256 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:35:42.257 +01:00 [DBG] Created DbConnection. (0ms).
2024-05-23 11:35:42.272 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:42.273 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:42.289 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:42.304 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-23 11:35:42.305 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-23 11:35:42.320 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:35:42.344 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:35:42.360 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:42.367 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 7ms reading results.
2024-05-23 11:35:42.376 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:42.382 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (5ms).
2024-05-23 11:35:42.385 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __CityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-05-23 11:35:42.398 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__CityId_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:35:42.419 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:42.421 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:42.423 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:35:42.424 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:35:42.425 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-23 11:35:42.433 +01:00 [DBG] Executing DbCommand [Parameters=[@__CityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__CityId_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-05-23 11:35:42.443 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__CityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__CityId_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-05-23 11:35:42.458 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:35:42.465 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:42.473 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 14ms reading results.
2024-05-23 11:35:42.485 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:35:42.490 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (5ms).
2024-05-23 11:35:42.493 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:35:42.519 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:35:42.522 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:35:42.523 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:35:42.538 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:35:42.553 +01:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-05-23 11:35:42.555 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 435.0378ms
2024-05-23 11:35:42.571 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:35:42.586 +01:00 [DBG] Connection id "0HN3R2G6LUDHA" completed keep alive response.
2024-05-23 11:35:42.587 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:35:42.603 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:35:42.605 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:35:42.620 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/2 - 200 108 application/json; charset=utf-8 628.4701ms
2024-05-23 11:38:33.613 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-05-23 11:38:33.774 +01:00 [DBG] Hosting starting
2024-05-23 11:38:33.809 +01:00 [INF] User profile is available. Using 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-23 11:38:33.818 +01:00 [DBG] Reading data from file 'C:\Users\nathan.yates_ivendi\AppData\Local\ASP.NET\DataProtection-Keys\key-f6c374ba-34e9-498e-b29b-aba2fc8bbb6b.xml'.
2024-05-23 11:38:33.825 +01:00 [DBG] Found key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b}.
2024-05-23 11:38:33.831 +01:00 [DBG] Considering key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} with expiration date 2024-08-20 09:32:40Z as default key.
2024-05-23 11:38:33.838 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:38:33.842 +01:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-05-23 11:38:33.844 +01:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-05-23 11:38:33.850 +01:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-05-23 11:38:33.856 +01:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-05-23 11:38:33.859 +01:00 [DBG] Using key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} as the default key.
2024-05-23 11:38:33.870 +01:00 [DBG] Key ring with default key {f6c374ba-34e9-498e-b29b-aba2fc8bbb6b} was loaded during application startup.
2024-05-23 11:38:34.030 +01:00 [INF] Now listening on: https://localhost:7165
2024-05-23 11:38:34.031 +01:00 [INF] Now listening on: http://localhost:5030
2024-05-23 11:38:34.033 +01:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-05-23 11:38:34.034 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-05-23 11:38:34.035 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-05-23 11:38:34.036 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-23 11:38:34.037 +01:00 [INF] Hosting environment: Development
2024-05-23 11:38:34.038 +01:00 [INF] Content root path: C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API
2024-05-23 11:38:34.041 +01:00 [DBG] Hosting started
2024-05-23 11:38:45.551 +01:00 [DBG] Connection id "0HN3R2I2U3VJ5" received FIN.
2024-05-23 11:38:45.556 +01:00 [DBG] Connection id "0HN3R2I2U3VJ5" accepted.
2024-05-23 11:38:45.557 +01:00 [DBG] Connection id "0HN3R2I2U3VJ5" started.
2024-05-23 11:38:45.559 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" accepted.
2024-05-23 11:38:45.561 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" started.
2024-05-23 11:38:45.573 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-05-23 11:38:45.614 +01:00 [DBG] Connection 0HN3R2I2U3VJ6 established using the following protocol: "Tls13"
2024-05-23 11:38:45.616 +01:00 [DBG] Connection id "0HN3R2I2U3VJ5" stopped.
2024-05-23 11:38:45.618 +01:00 [DBG] Connection id "0HN3R2I2U3VJ5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-05-23 11:38:45.646 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:38:45.663 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:38:45.679 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:38:45.700 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:38:45.704 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:38:45.714 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:38:45.835 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:38:45.838 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:38:45.843 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-23 11:38:45.846 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:38:45.856 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:38:45.860 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 217.0009ms
2024-05-23 11:38:47.688 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:38:47.691 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:38:47.693 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:38:47.694 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:38:47.696 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:38:47.701 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:38:47.702 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:38:47.704 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-23 11:38:47.705 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:38:47.707 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:38:47.714 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 26.3157ms
2024-05-23 11:38:51.761 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - null null
2024-05-23 11:38:51.764 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:38:51.770 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:38:51.771 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:38:51.773 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:38:51.777 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:38:51.778 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:38:51.794 +01:00 [DBG] Authorization was successful.
2024-05-23 11:38:51.798 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:38:51.830 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:38:51.860 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:38:51.861 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:38:51.863 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:38:51.871 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:38:51.885 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:38:51.895 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:38:51.998 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-05-23 11:38:52.014 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:38:52.021 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-23 11:38:52.027 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2024-05-23 11:38:52.029 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2024-05-23 11:38:52.043 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:38:52.044 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:38:52.059 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-23 11:38:52.061 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-23 11:38:52.076 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:38:52.077 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-23 11:38:52.091 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:38:52.106 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:38:52.108 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:38:52.122 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:38:52.124 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:38:52.137 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:38:52.139 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:38:52.152 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:38:52.177 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:38:52.181 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:38:52.191 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:38:52.193 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:38:52.196 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:38:52.198 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:38:52.211 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:38:52.213 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:38:52.228 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:38:52.230 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:38:52.243 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:38:52.755 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:38:52.778 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2024-05-23 11:38:52.933 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:38:52.957 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:38:52.967 +01:00 [DBG] Created DbConnection. (8ms).
2024-05-23 11:38:52.973 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:38:52.985 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:52.990 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:38:53.008 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-23 11:38:53.011 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2024-05-23 11:38:53.024 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:38:53.042 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2024-05-23 11:38:53.052 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:53.064 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 15ms reading results.
2024-05-23 11:38:53.082 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:53.097 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (15ms).
2024-05-23 11:38:53.108 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2024-05-23 11:38:53.160 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:38:53.170 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:38:53.178 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:53.180 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:38:53.182 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:38:53.185 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-05-23 11:38:53.190 +01:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:38:53.206 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2024-05-23 11:38:53.234 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:38:53.247 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:38:53.253 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:38:53.262 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:53.276 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 57ms reading results.
2024-05-23 11:38:53.281 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:53.295 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (13ms).
2024-05-23 11:38:53.330 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:38:53.337 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:38:53.337 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:38:53.339 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:38:53.340 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:38:53.346 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:38:53.439 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1542.8561ms
2024-05-23 11:38:53.441 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:38:53.442 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:38:53.444 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:38:53.448 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:38:53.451 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:38:53.456 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - 200 205 application/json; charset=utf-8 1694.6047ms
2024-05-23 11:38:56.798 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1?includePointsOfInterest=true - null null
2024-05-23 11:38:56.803 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:38:56.804 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2024-05-23 11:38:56.805 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2024-05-23 11:38:56.807 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:38:56.809 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:38:56.810 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:38:56.811 +01:00 [DBG] Authorization was successful.
2024-05-23 11:38:56.812 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:38:56.820 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:38:56.830 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:38:56.836 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:38:56.838 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:38:56.840 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:38:56.842 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:38:56.843 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:38:56.850 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:38:56.863 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-05-23 11:38:56.866 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-05-23 11:38:56.878 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-05-23 11:38:56.880 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-05-23 11:38:56.893 +01:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-05-23 11:38:56.895 +01:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-05-23 11:38:56.910 +01:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-05-23 11:38:56.911 +01:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2024-05-23 11:38:56.927 +01:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:38:56.942 +01:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:38:56.943 +01:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-05-23 11:38:56.958 +01:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-05-23 11:38:56.972 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:38:56.979 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-05-23 11:38:57.015 +01:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2024-05-23 11:38:57.074 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:38:57.084 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:38:57.085 +01:00 [DBG] Created DbConnection. (1ms).
2024-05-23 11:38:57.086 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:38:57.088 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:57.089 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:38:57.102 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2024-05-23 11:38:57.106 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-05-23 11:38:57.108 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-05-23 11:38:57.112 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2024-05-23 11:38:57.119 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:38:57.136 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:38:57.141 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:57.143 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 24ms reading results.
2024-05-23 11:38:57.145 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:38:57.146 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:38:57.152 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:38:57.169 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:38:57.170 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:38:57.179 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:38:57.180 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:38:57.187 +01:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2024-05-23 11:38:57.202 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 358.923ms
2024-05-23 11:38:57.211 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-05-23 11:38:57.212 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:38:57.228 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:38:57.229 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:38:57.232 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:38:57.235 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1?includePointsOfInterest=true - 200 233 application/json; charset=utf-8 437.5433ms
2024-05-23 11:39:01.126 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/2 - null null
2024-05-23 11:39:01.129 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:39:01.130 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2024-05-23 11:39:01.133 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2024-05-23 11:39:01.137 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:39:01.140 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:39:01.142 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:39:01.151 +01:00 [DBG] Authorization was successful.
2024-05-23 11:39:01.162 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:39:01.180 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:39:01.194 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:39:01.209 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:39:01.211 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:39:01.241 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:39:01.243 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:39:01.258 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:39:01.277 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:39:01.291 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:39:01.307 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:39:01.308 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:39:01.324 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:39:01.325 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:39:01.340 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:39:01.341 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-05-23 11:39:01.360 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-05-23 11:39:01.373 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:39:01.375 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:39:01.376 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-05-23 11:39:01.377 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-05-23 11:39:01.424 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:39:01.428 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-05-23 11:39:01.434 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:39:01.441 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:39:01.448 +01:00 [DBG] Created DbConnection. (7ms).
2024-05-23 11:39:01.453 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:01.455 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:01.459 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:39:01.475 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-23 11:39:01.476 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-05-23 11:39:01.491 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:39:01.516 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:39:01.531 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:01.537 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2024-05-23 11:39:01.546 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:01.554 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (7ms).
2024-05-23 11:39:01.569 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __CityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-05-23 11:39:01.585 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__CityId_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:39:01.619 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:01.626 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:01.627 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:39:01.631 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:39:01.646 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2024-05-23 11:39:01.647 +01:00 [DBG] Executing DbCommand [Parameters=[@__CityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__CityId_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-05-23 11:39:01.676 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__CityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__CityId_0 AND "p"."Id" = @__pointOfInterestId_1
LIMIT 1
2024-05-23 11:39:01.708 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:39:01.723 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:01.737 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 29ms reading results.
2024-05-23 11:39:01.747 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:01.755 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (8ms).
2024-05-23 11:39:01.771 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:39:01.794 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:39:01.797 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:39:01.812 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:39:01.828 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:39:01.843 +01:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-05-23 11:39:01.845 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 587.0397ms
2024-05-23 11:39:01.859 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-05-23 11:39:01.875 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:39:01.876 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:39:01.891 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:01.893 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:39:01.908 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest/2 - 200 108 application/json; charset=utf-8 782.3285ms
2024-05-23 11:39:06.817 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities?name=New%20York%20City - null null
2024-05-23 11:39:06.820 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:39:06.821 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-05-23 11:39:06.822 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-05-23 11:39:06.824 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:39:06.825 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:39:06.826 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:39:06.833 +01:00 [DBG] Authorization was successful.
2024-05-23 11:39:06.847 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:39:06.862 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-05-23 11:39:06.896 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:39:06.910 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:39:06.912 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:39:06.927 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:39:06.943 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:39:06.957 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:39:06.959 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-05-23 11:39:06.974 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2024-05-23 11:39:06.975 +01:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2024-05-23 11:39:06.990 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:39:06.991 +01:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2024-05-23 11:39:07.006 +01:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2024-05-23 11:39:07.008 +01:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2024-05-23 11:39:07.022 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:39:07.024 +01:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2024-05-23 11:39:07.039 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:39:07.054 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:39:07.056 +01:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:39:07.069 +01:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2024-05-23 11:39:07.071 +01:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2024-05-23 11:39:07.082 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:39:07.094 +01:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:39:07.097 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:39:07.107 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:39:07.109 +01:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:39:07.112 +01:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2024-05-23 11:39:07.114 +01:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2024-05-23 11:39:07.126 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:39:07.129 +01:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2024-05-23 11:39:07.131 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:39:07.144 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:39:07.146 +01:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:39:07.160 +01:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2024-05-23 11:39:07.161 +01:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2024-05-23 11:39:07.176 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:39:07.191 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .Count()'
2024-05-23 11:39:07.209 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c
            WHERE c.Name == @__name_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-05-23 11:39:07.219 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:39:07.225 +01:00 [DBG] Created DbConnection. (5ms).
2024-05-23 11:39:07.227 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:07.228 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:07.230 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:39:07.232 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-05-23 11:39:07.237 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-05-23 11:39:07.238 +01:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
2024-05-23 11:39:07.251 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__name_0='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
2024-05-23 11:39:07.263 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:07.270 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2024-05-23 11:39:07.279 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:07.286 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (6ms).
2024-05-23 11:39:07.289 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .OrderBy(c => c.Name)
    .Skip(__p_1)
    .Take(__p_2)'
2024-05-23 11:39:07.305 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE c.Name == @__name_0
        ORDER BY c.Name ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:39:07.314 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:07.323 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:07.326 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:39:07.327 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-05-23 11:39:07.328 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-05-23 11:39:07.329 +01:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 13), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
LIMIT @__p_2 OFFSET @__p_1
2024-05-23 11:39:07.334 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 13), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
LIMIT @__p_2 OFFSET @__p_1
2024-05-23 11:39:07.337 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:39:07.338 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:07.339 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 2ms reading results.
2024-05-23 11:39:07.341 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:07.343 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:39:07.345 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:39:07.357 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:39:07.358 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:39:07.359 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:39:07.360 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:39:07.362 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:39:07.364 +01:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 407.0183ms
2024-05-23 11:39:07.366 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-05-23 11:39:07.368 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:39:07.369 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:39:07.370 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:07.372 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:39:07.373 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities?name=New%20York%20City - 200 76 application/json; charset=utf-8 555.966ms
2024-05-23 11:39:10.889 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:39:10.891 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:39:10.892 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:39:10.893 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:39:10.895 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:39:10.897 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:39:10.899 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:39:10.906 +01:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2024-05-23 11:39:10.914 +01:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-05-23 11:39:10.919 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:39:10.921 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 403 0 null 32.0981ms
2024-05-23 11:39:17.466 +01:00 [DBG] Config reload token fired. Checking for changes...
2024-05-23 11:39:17.728 +01:00 [DBG] Config reload token fired. Checking for changes...
2024-05-23 11:39:27.758 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - null null
2024-05-23 11:39:27.761 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-05-23 11:39:27.762 +01:00 [DBG] The request path  does not match the path filter
2024-05-23 11:39:27.763 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:39:27.764 +01:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2024-05-23 11:39:27.767 +01:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:39:27.769 +01:00 [DBG] Successfully validated the token.
2024-05-23 11:39:27.770 +01:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-05-23 11:39:27.771 +01:00 [DBG] Authorization was successful.
2024-05-23 11:39:27.771 +01:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:39:27.775 +01:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-05-23 11:39:27.793 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-05-23 11:39:27.795 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-05-23 11:39:27.810 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-05-23 11:39:27.825 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-05-23 11:39:27.826 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-05-23 11:39:27.842 +01:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:39:27.858 +01:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-05-23 11:39:27.873 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:39:27.890 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-05-23 11:39:27.892 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:39:27.906 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:39:27.907 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-05-23 11:39:27.920 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-05-23 11:39:27.923 +01:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.0' with options: None
2024-05-23 11:39:27.926 +01:00 [DBG] Creating DbConnection.
2024-05-23 11:39:27.931 +01:00 [DBG] Created DbConnection. (5ms).
2024-05-23 11:39:27.943 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:27.944 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:27.960 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:39:27.975 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2024-05-23 11:39:27.977 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-05-23 11:39:27.991 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:39:28.022 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2024-05-23 11:39:28.047 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:28.053 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 6ms reading results.
2024-05-23 11:39:28.062 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:28.064 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:39:28.071 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-05-23 11:39:28.088 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-05-23 11:39:28.109 +01:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:28.113 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:28.117 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-05-23 11:39:28.120 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-05-23 11:39:28.122 +01:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-05-23 11:39:28.123 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-23 11:39:28.126 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2024-05-23 11:39:28.137 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-05-23 11:39:28.139 +01:00 [DBG] Closing data reader to 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:28.141 +01:00 [DBG] A data reader for 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db' is being disposed after spending 3ms reading results.
2024-05-23 11:39:28.142 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\nathan.yates_ivendi\source\repos\CityInfo\CityInfo.API\CityInfo.db'.
2024-05-23 11:39:28.144 +01:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db' (1ms).
2024-05-23 11:39:28.155 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-05-23 11:39:28.174 +01:00 [DBG] No information found on request to perform content negotiation.
2024-05-23 11:39:28.176 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-05-23 11:39:28.177 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-05-23 11:39:28.181 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-05-23 11:39:28.192 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-23 11:39:28.204 +01:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 361.8721ms
2024-05-23 11:39:28.207 +01:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-05-23 11:39:28.208 +01:00 [DBG] Connection id "0HN3R2I2U3VJ6" completed keep alive response.
2024-05-23 11:39:28.213 +01:00 [DBG] 'CityInfoContext' disposed.
2024-05-23 11:39:28.228 +01:00 [DBG] Disposing connection to database 'main' on server 'CityInfo.db'.
2024-05-23 11:39:28.230 +01:00 [DBG] Disposed connection to database 'main' on server 'CityInfo.db' (2ms).
2024-05-23 11:39:28.245 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointsofinterest - 200 110 application/json; charset=utf-8 487.0781ms
